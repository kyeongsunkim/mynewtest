%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% OXFORD THESIS TEMPLATE

% Use this template to produce a standard thesis that meets the Oxford University requirements for DPhil submission
%
% Originally by Keith A. Gillow (gillow@maths.ox.ac.uk), 1997
% Modified by Sam Evans (sam@samuelevansresearch.org), 2007
% Modified by John McManigle (john@oxfordechoes.com), 2015
% Modified by Ulrik Lyngs (ulrik.lyngs@cs.ox.ac.uk), 2018-, for use with R Markdown
%
% Ulrik Lyngs, 25 Nov 2018: Following John McManigle, broad permissions are granted to use, modify, and distribute this software
% as specified in the MIT License included in this distribution's LICENSE file.
%
% John commented this file extensively, so read through to see how to use the various options.  Remember that in LaTeX,
% any line starting with a % is NOT executed.  Several places below, you have a choice of which line to use
% out of multiple options (eg draft vs final, for PDF vs for binding, etc.)  When you pick one, add a % to the beginning of
% the lines you don't want.


%%%%% PAGE LAYOUT
% The most common choices should be below.  You can also do other things, like replacing "a4paper" with "letterpaper", etc.

% This one formats for two-sided binding (ie left and right pages have mirror margins; blank pages inserted where needed):
%\documentclass[a4paper,twoside]{templates/ociamthesis}
% This one formats for one-sided binding (ie left margin > right margin; no extra blank pages):
%\documentclass[a4paper]{ociamthesis}
% This one formats for PDF output (ie equal margins, no extra blank pages):
%\documentclass[a4paper,nobind]{templates/ociamthesis}

% As you can see from the uncommented line below, oxforddown template uses the a4paper size, 
% and passes in the binding option from the YAML header in index.Rmd:
\documentclass[a4paper, nobind]{templates/ociamthesis}


%%%%% ADDING LATEX PACKAGES
% add hyperref package with options from YAML %
\usepackage[pdfpagelabels]{hyperref}
% change the default coloring of links to something sensible
\usepackage{xcolor}
\usepackage[hangul]{kotex}


\definecolor{mylinkcolor}{RGB}{0,0,139}
\definecolor{myurlcolor}{RGB}{0,0,139}
\definecolor{mycitecolor}{RGB}{0,33,71}

\hypersetup{
  hidelinks,
  colorlinks,
  linktocpage=true,
  linkcolor=mylinkcolor,
  urlcolor=myurlcolor,
  citecolor=mycitecolor
}



% add float package to allow manual control of figure positioning %
\usepackage{float}

% enable strikethrough
\usepackage[normalem]{ulem}

% use soul package for correction highlighting
\usepackage{color, soul}
\definecolor{correctioncolor}{HTML}{CCCCFF}
\sethlcolor{correctioncolor}
\newcommand{\ctext}[3][RGB]{%
  \begingroup
  \definecolor{hlcolor}{#1}{#2}\sethlcolor{hlcolor}%
  \hl{#3}%
  \endgroup
}
\soulregister\ref7
\soulregister\cite7
\soulregister\autocite7
\soulregister\textcite7
\soulregister\pageref7

%%%%% FIXING / ADDING THINGS THAT'S SPECIAL TO R MARKDOWN'S USE OF LATEX TEMPLATES
% pandoc puts lists in 'tightlist' command when no space between bullet points in Rmd file,
% so we add this command to the template
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
 
% UL 1 Dec 2018, fix to include code in shaded environments
\usepackage{color}
\usepackage{fancyvrb}
\newcommand{\VerbBar}{|}
\newcommand{\VERB}{\Verb[commandchars=\\\{\}]}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
% Add ',fontsize=\small' for more characters per line
\usepackage{framed}
\definecolor{shadecolor}{RGB}{248,248,248}
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}
\newcommand{\AlertTok}[1]{\textcolor[rgb]{0.94,0.16,0.16}{#1}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.77,0.63,0.00}{#1}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\BuiltInTok}[1]{#1}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{#1}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{0.64,0.00,0.00}{\textbf{#1}}}
\newcommand{\ExtensionTok}[1]{#1}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ImportTok}[1]{#1}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\NormalTok}[1]{#1}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.81,0.36,0.00}{\textbf{#1}}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{#1}}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\RegionMarkerTok}[1]{#1}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}

%UL set white space before and after code blocks
\renewenvironment{Shaded}
{
  \vspace{10pt}%
  \begin{snugshade}%
}{%
  \end{snugshade}%
  \vspace{8pt}%
}

% User-included things with header_includes or in_header will appear here
% kableExtra packages will appear here if you use library(kableExtra)
\usepackage{booktabs}
\usepackage{longtable}
\usepackage{array}
\usepackage{multirow}
\usepackage{wrapfig}
\usepackage{float}
\usepackage{colortbl}
\usepackage{pdflscape}
\usepackage{tabu}
\usepackage{threeparttable}
\usepackage{threeparttablex}
\usepackage[normalem]{ulem}
\usepackage{makecell}
\usepackage{xcolor}


%UL set section header spacing
\usepackage{titlesec}
% 
\titlespacing\subsubsection{0pt}{24pt plus 4pt minus 2pt}{0pt plus 2pt minus 2pt}


%UL set whitespace around verbatim environments
\usepackage{etoolbox}
\makeatletter
\preto{\@verbatim}{\topsep=0pt \partopsep=0pt }
\makeatother



%%%%%%% PAGE HEADERS AND FOOTERS %%%%%%%%%
\usepackage{fancyhdr}
\setlength{\headheight}{15pt}
\fancyhf{} % clear the header and footers
\pagestyle{fancy}
\renewcommand{\chaptermark}[1]{\markboth{\thechapter. #1}{\thechapter. #1}}
\renewcommand{\sectionmark}[1]{\markright{\thesection. #1}} 
\renewcommand{\headrulewidth}{0pt}

\fancyhead[LO]{\emph{\leftmark}} 
\fancyhead[RE]{\emph{\rightmark}} 

% UL page number position 
\fancyfoot[R]{\emph{\thepage}} %regular pages
\fancypagestyle{plain}{\fancyhf{}\fancyfoot[R]{\emph{\thepage}}} %chapter pages

% JEM fix header on cleared pages for openright
\def\cleardoublepage{\clearpage\if@twoside \ifodd\c@page\else
   \hbox{}
   \fancyfoot[R]{}
   \newpage
   \if@twocolumn\hbox{}\newpage
   \fi
   \fancyhead[LO]{\emph{\leftmark}} 
   \fancyhead[RE]{\emph{\rightmark}} 
   \fi\fi}


%%%%% SELECT YOUR DRAFT OPTIONS
% This adds a "DRAFT" footer to every normal page.  (The first page of each chapter is not a "normal" page.)
\fancyfoot[C]{\emph{DRAFT Printed on \today}}

% IP feb 2021: option to include line numbers in PDF

% This highlights (in blue) corrections marked with (for words) \mccorrect{blah} or (for whole
% paragraphs) \begin{mccorrection} . . . \end{mccorrection}.  This can be useful for sending a PDF of
% your corrected thesis to your examiners for review.  Turn it off, and the blue disappears.
\correctionstrue


%%%%% BIBLIOGRAPHY SETUP
% Note that your bibliography will require some tweaking depending on your department, preferred format, etc.
% If you've not used LaTeX before, I recommend reading a little about biblatex/biber and getting started with it.
% If you're already a LaTeX pro and are used to natbib or something, modify as necessary.
% Either way, you'll have to choose and configure an appropriate bibliography format...


\usepackage[style=authoryear, sorting=nyt, backend=biber, maxcitenames=2, useprefix, doi=true, isbn=false, uniquename=false]{biblatex}
\newcommand*{\bibtitle}{Works Cited}

\addbibresource{bibliography/references.bib}
\addbibresource{bibliography/additional-references.bib}


% This makes the bibliography left-aligned (not 'justified') and slightly smaller font.
\renewcommand*{\bibfont}{\raggedright\small}


% Uncomment this if you want equation numbers per section (2.3.12), instead of per chapter (2.18):
%\numberwithin{equation}{subsection}


%%%%% THESIS / TITLE PAGE INFORMATION
% Everybody needs to complete the following:
\title{My \texttt{FLAC3D} Notes}
\author{Kyeong Sun Kim}
\college{Civil and Environmental Engineering}

% Master's candidates who require the alternate title page (with candidate number and word count)
% must also un-comment and complete the following three lines:

% Uncomment the following line if your degree also includes exams (eg most masters):
%\renewcommand{\submittedtext}{Submitted in partial completion of the}
% Your full degree name.  (But remember that DPhils aren't "in" anything.  They're just DPhils.)
\degree{}
% Term and year of submission, or date if your board requires (eg most masters)
\degreedate{Sept, 2021}


%%%%% YOUR OWN PERSONAL MACROS
% This is a good place to dump your own LaTeX macros as they come up.

% To make text superscripts shortcuts
	\renewcommand{\th}{\textsuperscript{th}} % ex: I won 4\th place
	\newcommand{\nd}{\textsuperscript{nd}}
	\renewcommand{\st}{\textsuperscript{st}}
	\newcommand{\rd}{\textsuperscript{rd}}

%%%%% THE ACTUAL DOCUMENT STARTS HERE
\begin{document}

%%%%% CHOOSE YOUR LINE SPACING HERE
% This is the official option.  Use it for your submission copy and library copy:
\setlength{\textbaselineskip}{22pt plus2pt}
% This is closer spacing (about 1.5-spaced) that you might prefer for your personal copies:
%\setlength{\textbaselineskip}{18pt plus2pt minus1pt}

% You can set the spacing here for the roman-numbered pages (acknowledgements, table of contents, etc.)
\setlength{\frontmatterbaselineskip}{17pt plus1pt minus1pt}

% UL: You can set the line and paragraph spacing here for the separate abstract page to be handed in to Examination schools
\setlength{\abstractseparatelineskip}{13pt plus1pt minus1pt}
\setlength{\abstractseparateparskip}{0pt plus 1pt}

% UL: You can set the general paragraph spacing here - I've set it to 2pt (was 0) so
% it's less claustrophobic
\setlength{\parskip}{2pt plus 1pt}

%
% Oxford University logo on title page
%
\def\crest{{\includegraphics[width=5cm]{templates/snupdf.pdf}}}
\renewcommand{\university}{Seoul National University}
\renewcommand{\submittedtext}{}


% Leave this line alone; it gets things started for the real document.
\setlength{\baselineskip}{\textbaselineskip}


%%%%% CHOOSE YOUR SECTION NUMBERING DEPTH HERE
% You have two choices.  First, how far down are sections numbered?  (Below that, they're named but
% don't get numbers.)  Second, what level of section appears in the table of contents?  These don't have
% to match: you can have numbered sections that don't show up in the ToC, or unnumbered sections that
% do.  Throughout, 0 = chapter; 1 = section; 2 = subsection; 3 = subsubsection, 4 = paragraph...

% The level that gets a number:
\setcounter{secnumdepth}{3}
% The level that shows up in the ToC:
\setcounter{tocdepth}{2}


%%%%% ABSTRACT SEPARATE
% This is used to create the separate, one-page abstract that you are required to hand into the Exam
% Schools.  You can comment it out to generate a PDF for printing or whatnot.

% JEM: Pages are roman numbered from here, though page numbers are invisible until ToC.  This is in
% keeping with most typesetting conventions.
\begin{romanpages}

% Title page is created here
\maketitle

%%%%% DEDICATION -- If you'd like one, un-comment the following.

%%%%% ACKNOWLEDGEMENTS -- Nothing to do here except comment out if you don't want it.


%%%%% ABSTRACT -- Nothing to do here except comment out if you don't want it.
%\begin{abstract}
%	
%\end{abstract}

%%%%% MINI TABLES
% This lays the groundwork for per-chapter, mini tables of contents.  Comment the following line
% (and remove \minitoc from the chapter files) if you don't want this.  Un-comment either of the
% next two lines if you want a per-chapter list of figures or tables.
  \dominitoc % include a mini table of contents

% This aligns the bottom of the text of each page.  It generally makes things look better.
\flushbottom

% This is where the whole-document ToC appears:
\tableofcontents


% Uncomment to generate a list of tables:
%%%%% LIST OF ABBREVIATIONS
% This example includes a list of abbreviations.  Look at text/abbreviations.tex to see how that file is
% formatted.  The template can handle any kind of list though, so this might be a good place for a
% glossary, etc.

% The Roman pages, like the Roman Empire, must come to its inevitable close.
\end{romanpages}

%%%%% CHAPTERS
% Add or remove any chapters you'd like here, by file name (excluding '.tex'):
\flushbottom

% all your chapters and appendices will appear here
\minitoc

\newpage

\begin{savequote}
There is grandeur in this view of life, with its several powers, having
been originally breathed into a few forms or into one; and that, whilst
this planet has gone cycling on according to the fixed law of gravity,
from so simple a beginning endless forms most beautiful and most
wonderful have been, and are being, evolved.
\qauthor{Charles Darwin(1809-1882)}\end{savequote}

\hypertarget{kaist-model-flac3d}{%
\chapter{KAIST Model FLAC3D}\label{kaist-model-flac3d}}

\hypertarget{grid-generation}{%
\section{Grid Generation}\label{grid-generation}}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{" =========================================== "}
\CommentTok{" =============GRID GENERATION=============== "}
\CommentTok{" =========================================== "}
\ImportTok{import}\NormalTok{ itasca }\ImportTok{as}\NormalTok{ it}
\NormalTok{it.command(}\StringTok{"python{-}reset{-}state false"}\NormalTok{)}
\NormalTok{it.command(}\StringTok{"""}
\StringTok{model new}
\StringTok{zone create radial{-}cylinder point 0 (0,0,0) ...}
\StringTok{                            point 1 (40,0,0) ...}
\StringTok{                            point 2 (0,7.45,0) ...}
\StringTok{                            point 3 (0,0,40) ...}
\StringTok{                            point 4 (40,7.45,0) ...}
\StringTok{                            point 5 (0,7.45,40) ...}
\StringTok{                            point 6 (40,0,40) ...}
\StringTok{                            point 7 (40,7.45,40) ...}
\StringTok{                            point 8 (1,0,0) ...}
\StringTok{                            point 9 (0,0,1) ...}
\StringTok{                            point 10 (1,7.45,0) ...}
\StringTok{                            point 11 (0,7.45,0) ...}
\StringTok{                            size 5 10 6 20 ...}
\StringTok{                            rat 1 1 1 1.2 ...}
\StringTok{                            fill group \textquotesingle{}shaft\textquotesingle{}}
\StringTok{                            """}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{myfigureeeeee/final-block}

\includegraphics[width=1\linewidth]{myfigureeeeee/result_zone_generate_shaft}

\hypertarget{groups}{%
\section{Groups}\label{groups}}

\hypertarget{properties}{%
\section{Properties}\label{properties}}

\hypertarget{elements}{%
\section{Elements}\label{elements}}

\hypertarget{b.c.-and-i.c.}{%
\section{B.C. and I.C.}\label{b.c.-and-i.c.}}

\hypertarget{initial-equilibrium}{%
\section{Initial Equilibrium}\label{initial-equilibrium}}

\hypertarget{alterations}{%
\section{Alterations}\label{alterations}}

\hypertarget{results}{%
\section{Results}\label{results}}

\newpage

\hypertarget{kaist-model-python}{%
\chapter{KAIST Model Python}\label{kaist-model-python}}

\hypertarget{code}{%
\section{Code}\label{code}}

\begin{Shaded}
\begin{Highlighting}[]
\ImportTok{import}\NormalTok{ itasca }\ImportTok{as}\NormalTok{ it}
\NormalTok{it.command(}\StringTok{"python{-}reset{-}state false"}\NormalTok{)}
\ImportTok{import}\NormalTok{ numpy }\ImportTok{as}\NormalTok{ np}
\NormalTok{np.set\_printoptions(threshold}\OperatorTok{=}\DecValTok{20}\NormalTok{)}
\ImportTok{from}\NormalTok{ itasca }\ImportTok{import}\NormalTok{ zonearray }\ImportTok{as}\NormalTok{ za}
\ImportTok{from}\NormalTok{ itasca }\ImportTok{import}\NormalTok{ gridpointarray }\ImportTok{as}\NormalTok{ gpa}


\CommentTok{" =========================================== "}
\CommentTok{" =============GRID GENERATION=============== "}
\CommentTok{" =========================================== "}

\NormalTok{it.command(}\StringTok{"""}
\StringTok{model new}
\StringTok{zone create radial{-}cylinder point 0 (0,0,0) ...}
\StringTok{                            point 1 (40,0,0) ...}
\StringTok{                            point 2 (0,7.45,0) ...}
\StringTok{                            point 3 (0,0,40) ...}
\StringTok{                            point 4 (40,7.45,0) ...}
\StringTok{                            point 5 (0,7.45,40) ...}
\StringTok{                            point 6 (40,0,40) ...}
\StringTok{                            point 7 (40,7.45,40) ...}
\StringTok{                            point 8 (1,0,0) ...}
\StringTok{                            point 9 (0,0,1) ...}
\StringTok{                            point 10 (1,7.45,0) ...}
\StringTok{                            point 11 (0,7.45,0) ...}
\StringTok{                            size 5 10 6 20 ...}
\StringTok{                            rat 1 1 1 1.2 ...}
\StringTok{                            fill group \textquotesingle{}shaft\textquotesingle{}}
\StringTok{                            """}\NormalTok{)}

\CommentTok{" =========================================== "}
\CommentTok{" ============GROUPS AND MASKS=============== "}
\CommentTok{" =========================================== "}

\CommentTok{" GROUPS AND MASK ARRAYS "}
\NormalTok{it.command(}\StringTok{"zone group }\CharTok{\textbackslash{}"}\StringTok{lower}\CharTok{\textbackslash{}"}\StringTok{ range position{-}z 0 5"}\NormalTok{)}
\NormalTok{za.in\_group(}\StringTok{"lower"}\NormalTok{)}
\NormalTok{za.in\_group(}\StringTok{"lower"}\NormalTok{).}\BuiltInTok{sum}\NormalTok{(), }\StringTok{"zones in lower group."}
\NormalTok{corner\_mask }\OperatorTok{=} \BuiltInTok{reduce}\NormalTok{(np.logical\_and, (x}\OperatorTok{\textless{}}\DecValTok{3}\NormalTok{, y}\OperatorTok{\textless{}}\DecValTok{3}\NormalTok{, z}\OperatorTok{\textless{}}\DecValTok{3}\NormalTok{))}
\NormalTok{za.set\_group(corner\_mask, }\StringTok{"corner"}\NormalTok{, }\StringTok{"geometry"}\NormalTok{)}
\BuiltInTok{print}\NormalTok{ za.in\_group(}\StringTok{"corner"}\NormalTok{, }\StringTok{"geometry"}\NormalTok{).}\BuiltInTok{sum}\NormalTok{(), }\StringTok{"zones in corner group."}

\CommentTok{" GRIDPOINTS ARRAY FUNCTIONS "}
\NormalTok{gpos }\OperatorTok{=}\NormalTok{ gpa.pos()}
\NormalTok{gx, gy, gz }\OperatorTok{=}\NormalTok{ gpos.T}
\BuiltInTok{print}\NormalTok{ gz}
\NormalTok{f }\OperatorTok{=}\NormalTok{ gpa.fixity()}
\BuiltInTok{print}\NormalTok{ f}
\NormalTok{f[:,][gz}\OperatorTok{==}\DecValTok{0}\NormalTok{] }\OperatorTok{=} \VariableTok{True}\NormalTok{, }\VariableTok{True}\NormalTok{, }\VariableTok{True}
\BuiltInTok{print}\NormalTok{ f}
\NormalTok{gpa.set\_fixity(f)}

\NormalTok{top\_gridpoints }\OperatorTok{=}\NormalTok{ gz}\OperatorTok{==}\DecValTok{10}
\NormalTok{radial\_distance }\OperatorTok{=}\NormalTok{ np.sqrt((gx}\OperatorTok{{-}}\DecValTok{5}\NormalTok{)}\OperatorTok{**}\DecValTok{2}\OperatorTok{+}\NormalTok{(gy}\OperatorTok{{-}}\DecValTok{5}\NormalTok{)}\OperatorTok{**}\DecValTok{2}\NormalTok{)}
\NormalTok{central\_gridpoints }\OperatorTok{=}\NormalTok{ radial\_distance }\OperatorTok{\textless{}} \DecValTok{5}
\NormalTok{mask }\OperatorTok{=}\NormalTok{ np.logical\_and(top\_gridpoints, central\_gridpoints)}
\BuiltInTok{print} \StringTok{"boundary load applied to }\SpecialCharTok{\{\}}\StringTok{ gridpoints"}\NormalTok{.}\BuiltInTok{format}\NormalTok{(mask.}\BuiltInTok{sum}\NormalTok{())}
\NormalTok{fapp }\OperatorTok{=}\NormalTok{ gpa.force\_app()}
\BuiltInTok{print}\NormalTok{ fapp}
\NormalTok{fapp[:,}\DecValTok{2}\NormalTok{] }\OperatorTok{=}\NormalTok{ mask}\OperatorTok{*}\FloatTok{1e6}\OperatorTok{*}\NormalTok{(}\FloatTok{5.0}\OperatorTok{{-}}\NormalTok{radial\_distance)}\OperatorTok{/}\FloatTok{5.0}
\NormalTok{gpa.set\_force\_app(fapp)}


\BuiltInTok{print} \StringTok{"zone centroids: "}
\BuiltInTok{print}\NormalTok{ za.pos()}
\NormalTok{za.gridpoints()}
\NormalTok{za.faces()}
\NormalTok{za.ids()}
\BuiltInTok{print}\NormalTok{ za.neighbors()}



\CommentTok{" =========================================== "}
\CommentTok{" ===============PROPERTIES================== "}
\CommentTok{" =========================================== "}

\NormalTok{it.command(}\StringTok{"""}
\StringTok{zone cmodel assign elastic}
\StringTok{zone property density 2950 young 12e9 poisson 0.25}
\StringTok{cycle 1}
\StringTok{"""}\NormalTok{)}


\CommentTok{" =========================================== "}
\CommentTok{" ==========BOUNDARY CONDITIONS============== "}
\CommentTok{" =========================================== "}




\CommentTok{" =========================================== "}
\CommentTok{" =================RESULTS=================== "}
\CommentTok{" =========================================== "}

\NormalTok{it.command(}\StringTok{"model solve"}\NormalTok{)}
\BuiltInTok{print} \StringTok{"gridpoint displacements:"}
\BuiltInTok{print}\NormalTok{ gpa.disp()}
\BuiltInTok{print} \StringTok{"gridpoint displacement magnitudes: "}
\NormalTok{mag }\OperatorTok{=}\NormalTok{ np.linalg.norm(gpa.disp(), axis}\OperatorTok{=}\DecValTok{1}\NormalTok{)}
\BuiltInTok{print}\NormalTok{ mag}
\NormalTok{max\_index }\OperatorTok{=}\NormalTok{ np.argmax(mag)}
\BuiltInTok{print} \StringTok{"Maximum displacement: }\SpecialCharTok{\{\}}\StringTok{ at location }\SpecialCharTok{\{\}}\StringTok{"}\NormalTok{.}\BuiltInTok{format}\NormalTok{(gpa.disp()[max\_index],}
\NormalTok{                                              gpa.pos()[max\_index])}

\BuiltInTok{print} \StringTok{"Vertical displacement along the vertical line x=5, y=5: from z=0 to z=10"}
\BuiltInTok{print}\NormalTok{ gpa.disp()[np.logical\_and(gx}\OperatorTok{==}\DecValTok{5}\NormalTok{, gy}\OperatorTok{==}\DecValTok{5}\NormalTok{)][:,}\DecValTok{2}\NormalTok{]}

\NormalTok{za.stress()}

\NormalTok{za.stress\_flat()}


\CommentTok{" =========================================== "}
\CommentTok{" =========REFERENCE EXAMPLES================ "}
\CommentTok{" =========================================== "}


\CommentTok{""" Some Numpy Operation Examples}
\CommentTok{np.array([1,2,3,4,5])}
\CommentTok{np.linspace(0,1,15)}
\CommentTok{np.zeros((4,4))}
\CommentTok{a = np.linspace(0,1,15)}
\CommentTok{b = np.ones\_like(a)}
\CommentTok{np.sin(a)}
\CommentTok{print a[0]}
\CommentTok{a[0] = 20.2}
\CommentTok{print a}
\CommentTok{c = np.array(((1,2,3),(4,5,6),(7,8,9),(10,11,12)))}
\CommentTok{print c}
\CommentTok{c[0][0]}
\CommentTok{c[:,0]}
\CommentTok{"""}
\CommentTok{""" SOME GRIDPOINTS EXAMPLES}
\CommentTok{z = it.zone.near((5,5,5))}
\CommentTok{print "central zone id: \{\}, position: \{\}".format(z.id(), z.pos())}

\CommentTok{for gp in z.gridpoints():}
\CommentTok{    print "gridpoint with id: \{\} at \{\}".format(gp.id(), gp.pos())}
\CommentTok{"""}
\end{Highlighting}
\end{Shaded}

\newpage

\hypertarget{axial-concrete-pile}{%
\chapter{Axial Concrete Pile}\label{axial-concrete-pile}}

\hypertarget{problem-description}{%
\section{Problem Description}\label{problem-description}}

\hypertarget{problem-statement}{%
\subsection{Problem Statement}\label{problem-statement}}

The pile is subjected to an axial load of 100 kN,
and then the top of the pile is moved horizontally for a displacement of 4 cm.
The goal is to determine relation of axial loading to the ultimate bearing capacity.
And, lateral load-deflection curve is calculated.

\begin{enumerate}
\def\labelenumi{\arabic{enumi})}
\tightlist
\item
  origin at the top of the pile, z upward.
\item
  z=0: free surface
\item
  z=-8: fixed in z-eirection
\item
  x=+8, -8, y = 8: roller
\item
  skin friction is modeled by placing an interface
  between pile concrete wall and clay.
  In it, fric angle of 20 and c=30kPa are assumed.
\item
  toe interface is placed between pile tip and clay
  \emph{note: Zone faces are separated in a previous command so that the gridpoints common to both will be separated as well.
  }note: include Figure of grid (geometry)
\end{enumerate}

\hypertarget{main-parameters}{%
\subsection{Main Parameters}\label{main-parameters}}

Diameter = 0.6 m
Length = 5 m
Clay
GWT = 5.5m

\hypertarget{modeling-procedure}{%
\section{Modeling Procedure}\label{modeling-procedure}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi})}
\tightlist
\item
  equil. stress state under gravity load before install.
  1-1) water table is created at z=5.5
  1-2) wet density of clay is assigned below this water table.
\item
  equil. stress state after installation.
  2-1) change properties of pile zones from those
  representing clay to those representing concrete.
  2-2) vertical equil. stress distribution at this equil. state is shown in
  *note: include Figure of contours of vertical stress at ini state incld. pile weight
\item
  apply vertical velocity at top of pile
  ``ramp'' = boundary condition is increased linearly
  \emph{note: critical timestep is controlled by high stiffness of concrete
  If velocity is sudden, inertial effects will dominate and renders difficulty to identification of steady state response of system
  table ``ramp'' is used to apply velocity to pile top gridpoints.
  }note: FISH FUNCTION vert\_load calculates axial stress at the top of pile and stores value as a history
  For efficiency, gridpoints on cap surface are stored in symbol ``cap'' as a map
  \emph{note: include plot of axial stress vs axial displ. at pile toe. ramp = (0,5e-8), step number = 30000
  }note: combined damping is used to remove kinetic energy for prescribed loading condition. This is because mass-adjustment process depends on velocity sign-changes..
  \emph{note: FISH FUNCTION tot\_reac monitors soil reaction along pile as a func of lateral displ. tot\_reac creates tables of soil reaction (p) vs.~lateral displ (y) at diff. locations along pile to generate p-y curve.
  }note: include Figure of p-y curve at 11 equidistant points along pile
\end{enumerate}

\hypertarget{zones}{%
\section{Zones}\label{zones}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{model new}
\NormalTok{model title }\StringTok{\textquotesingle{}Axial and lateral loading of a concrete pile\textquotesingle{}}
\OperatorTok{;}\NormalTok{ create grid interactively }\ImportTok{from}\NormalTok{ the extruder tool, }
\OperatorTok{;}\NormalTok{ exported to geometry.f3dat }\ImportTok{from}\NormalTok{ State Record pane.}
\NormalTok{call }\StringTok{\textquotesingle{}geometry\textquotesingle{}}\NormalTok{ suppress}
\NormalTok{zone generate }\ImportTok{from}\OperatorTok{{-}}\NormalTok{extruder}
\OperatorTok{;}\NormalTok{ Reflect the grid to get a }\DecValTok{1}\OperatorTok{/}\DecValTok{2}\NormalTok{ space instead of a }\DecValTok{1}\OperatorTok{/}\DecValTok{4}\NormalTok{ space}
\NormalTok{zone reflect dip}\OperatorTok{{-}}\NormalTok{direction }\DecValTok{270}\NormalTok{ dip }\DecValTok{90}
\end{Highlighting}
\end{Shaded}

\hypertarget{groups-1}{%
\section{Groups}\label{groups-1}}

\begin{Shaded}
\begin{Highlighting}[]
\OperatorTok{;}\NormalTok{ Name intersections of things named }\KeywordTok{in}\NormalTok{ the two extruder views}
\NormalTok{zone group }\StringTok{\textquotesingle{}clay\textquotesingle{}} \BuiltInTok{range}\NormalTok{ group }\StringTok{\textquotesingle{}clay{-}c\textquotesingle{}} \KeywordTok{or} \StringTok{\textquotesingle{}clay{-}s\textquotesingle{}} \KeywordTok{or} \StringTok{\textquotesingle{}wetclay{-}s\textquotesingle{}}
\NormalTok{zone group }\StringTok{\textquotesingle{}pile\textquotesingle{}} \BuiltInTok{range}\NormalTok{ group }\StringTok{\textquotesingle{}pile{-}c\textquotesingle{}}\NormalTok{ group }\StringTok{\textquotesingle{}pile{-}s\textquotesingle{}} \KeywordTok{or} \StringTok{\textquotesingle{}remove{-}s\textquotesingle{}}
\NormalTok{zone group }\StringTok{\textquotesingle{}remove\textquotesingle{}} \BuiltInTok{range}\NormalTok{ group }\StringTok{\textquotesingle{}remove{-}s\textquotesingle{}}\NormalTok{ group }\StringTok{\textquotesingle{}pile{-}c\textquotesingle{}} \KeywordTok{not} \OperatorTok{;} 
\NormalTok{zone face group }\StringTok{\textquotesingle{}wall\textquotesingle{}}\NormalTok{ internal }\BuiltInTok{range}\NormalTok{ group }\StringTok{\textquotesingle{}wall{-}c\textquotesingle{}}\NormalTok{ group }\StringTok{\textquotesingle{}pile\textquotesingle{}}
\NormalTok{zone face group }\StringTok{\textquotesingle{}base\textquotesingle{}}\NormalTok{ internal }\BuiltInTok{range}\NormalTok{ group }\StringTok{\textquotesingle{}base{-}s\textquotesingle{}}\NormalTok{ group }\StringTok{\textquotesingle{}pile\textquotesingle{}}
\NormalTok{zone face skin }\OperatorTok{;}\NormalTok{ Name far field boundaries}
\OperatorTok{;}\NormalTok{ Delete the area marked }\ControlFlowTok{for}\NormalTok{ removal}
\NormalTok{zone delete }\BuiltInTok{range}\NormalTok{ group }\StringTok{\textquotesingle{}remove\textquotesingle{}}
\OperatorTok{;}
\OperatorTok{;}\NormalTok{ setup interfaces}
\OperatorTok{;}\NormalTok{ separate using zone separate}
\OperatorTok{;} \BuiltInTok{all}\NormalTok{ at once so common nodes are separated}
\NormalTok{zone separate by}\OperatorTok{{-}}\NormalTok{face new}\OperatorTok{{-}}\NormalTok{side group }\StringTok{\textquotesingle{}iwall\textquotesingle{}}\NormalTok{ slot }\StringTok{\textquotesingle{}int\textquotesingle{}}\NormalTok{ ...}
     \BuiltInTok{range}\NormalTok{ group }\StringTok{\textquotesingle{}wall\textquotesingle{}} \KeywordTok{or} \StringTok{\textquotesingle{}base\textquotesingle{}}
\OperatorTok{;}\NormalTok{ Want two different interfaces }\ControlFlowTok{for}\NormalTok{ proper normal direction at corner}
\NormalTok{zone interface }\StringTok{\textquotesingle{}side\textquotesingle{}}\NormalTok{ create by}\OperatorTok{{-}}\NormalTok{face }\BuiltInTok{range}\NormalTok{ group }\StringTok{\textquotesingle{}wall\textquotesingle{}} \KeywordTok{and} \StringTok{\textquotesingle{}iwall\textquotesingle{}}
\NormalTok{zone interface }\StringTok{\textquotesingle{}base\textquotesingle{}}\NormalTok{ create by}\OperatorTok{{-}}\NormalTok{face }\BuiltInTok{range}\NormalTok{ group }\StringTok{\textquotesingle{}base\textquotesingle{}} \KeywordTok{and} \StringTok{\textquotesingle{}iwall\textquotesingle{}}
\OperatorTok{;}\NormalTok{ Save initial geometric state}
\NormalTok{model save }\StringTok{\textquotesingle{}geometry\textquotesingle{}}
\end{Highlighting}
\end{Shaded}

\hypertarget{properties-1}{%
\section{Properties}\label{properties-1}}

\begin{Shaded}
\begin{Highlighting}[]
\OperatorTok{;}\NormalTok{ Initialize gravity, pore}\OperatorTok{{-}}\NormalTok{pressures, density, }\KeywordTok{and}\NormalTok{ stres state}
\NormalTok{model gravity }\DecValTok{10}
\OperatorTok{;}\NormalTok{ water table information}
\NormalTok{zone water density }\DecValTok{1000}
\NormalTok{zone water plane origin (}\DecValTok{0}\NormalTok{,}\DecValTok{0}\NormalTok{,}\OperatorTok{{-}}\FloatTok{5.5}\NormalTok{) normal (}\DecValTok{0}\NormalTok{,}\DecValTok{0}\NormalTok{,}\OperatorTok{{-}}\DecValTok{1}\NormalTok{)}
\NormalTok{zone initialize density }\DecValTok{1230}
\NormalTok{zone initialize density }\DecValTok{1550} \BuiltInTok{range}\NormalTok{ group }\StringTok{\textquotesingle{}wetclay{-}s\textquotesingle{}} \OperatorTok{;}\NormalTok{ Wet density}
\OperatorTok{;}\NormalTok{ assign properties to the soil }\KeywordTok{and}\NormalTok{ interfaces }\OperatorTok{{-}}\NormalTok{ temporarily remove pile cap}
\NormalTok{zone cmodel assign mohr}\OperatorTok{{-}}\NormalTok{coulomb ...}
     \BuiltInTok{range}\NormalTok{ group }\StringTok{\textquotesingle{}clay\textquotesingle{}}
\NormalTok{zone }\BuiltInTok{property}\NormalTok{ bulk }\FloatTok{8.333e7}\NormalTok{  shear }\FloatTok{3.846e7}\NormalTok{  cohesion }\DecValTok{30000}\NormalTok{ fric }\DecValTok{0}\NormalTok{ ...}
     \BuiltInTok{range}\NormalTok{ group }\StringTok{\textquotesingle{}clay\textquotesingle{}}
\NormalTok{zone cmodel assign elastic                 }\BuiltInTok{range}\NormalTok{ group }\StringTok{\textquotesingle{}pile\textquotesingle{}}
\NormalTok{zone }\BuiltInTok{property}\NormalTok{ bulk }\FloatTok{8.333e7}\NormalTok{  shear }\FloatTok{3.846e7}  \BuiltInTok{range}\NormalTok{ group }\StringTok{\textquotesingle{}pile\textquotesingle{}}
\NormalTok{zone cmodel assign null                    }\BuiltInTok{range}\NormalTok{ group }\StringTok{\textquotesingle{}remove{-}s\textquotesingle{}}
\NormalTok{zone interface }\StringTok{\textquotesingle{}side\textquotesingle{}}\NormalTok{ node }\BuiltInTok{property}\NormalTok{ stiffness}\OperatorTok{{-}}\NormalTok{normal }\FloatTok{1e8}\NormalTok{ ...}
\NormalTok{                           stiffness}\OperatorTok{{-}}\NormalTok{shear }\FloatTok{1e8}\NormalTok{ friction }\DecValTok{20}\NormalTok{ cohesion }\DecValTok{30000}
\NormalTok{zone interface }\StringTok{\textquotesingle{}base\textquotesingle{}}\NormalTok{ node }\BuiltInTok{property}\NormalTok{ stiffness}\OperatorTok{{-}}\NormalTok{normal }\FloatTok{1e8}\NormalTok{ ...}
\NormalTok{                           stiffness}\OperatorTok{{-}}\NormalTok{shear }\FloatTok{1e8}\NormalTok{ friction }\DecValTok{20}\NormalTok{ cohesion }\DecValTok{30000}
\end{Highlighting}
\end{Shaded}

\hypertarget{b.c.-and-i.c.-1}{%
\section{B.C. and I.C.}\label{b.c.-and-i.c.-1}}

\begin{Shaded}
\begin{Highlighting}[]
\OperatorTok{;}\NormalTok{ boundary }\KeywordTok{and}\NormalTok{ initial stress conditions}
\NormalTok{zone face }\BuiltInTok{apply}\NormalTok{ velocity}\OperatorTok{{-}}\NormalTok{normal }\DecValTok{0} \BuiltInTok{range}\NormalTok{ group }\StringTok{\textquotesingle{}Bottom\textquotesingle{}}
\NormalTok{zone face }\BuiltInTok{apply}\NormalTok{ velocity}\OperatorTok{{-}}\NormalTok{normal }\DecValTok{0} \BuiltInTok{range}\NormalTok{ group }\StringTok{\textquotesingle{}East\textquotesingle{}} \KeywordTok{or} \StringTok{\textquotesingle{}West\textquotesingle{}}
\NormalTok{zone face }\BuiltInTok{apply}\NormalTok{ velocity}\OperatorTok{{-}}\NormalTok{normal }\DecValTok{0} \BuiltInTok{range}\NormalTok{ group }\StringTok{\textquotesingle{}North\textquotesingle{}} \KeywordTok{or} \StringTok{\textquotesingle{}South\textquotesingle{}}
\NormalTok{zone initialize}\OperatorTok{{-}}\NormalTok{stress ratio }\FloatTok{0.4286}
\NormalTok{zone interface }\StringTok{\textquotesingle{}side\textquotesingle{}}\NormalTok{ node initialize}\OperatorTok{{-}}\NormalTok{stresses}
\NormalTok{zone interface }\StringTok{\textquotesingle{}base\textquotesingle{}}\NormalTok{ node initialize}\OperatorTok{{-}}\NormalTok{stresses}
\end{Highlighting}
\end{Shaded}

\hypertarget{initial-equilibrium-1}{%
\section{Initial Equilibrium}\label{initial-equilibrium-1}}

\begin{Shaded}
\begin{Highlighting}[]
\OperatorTok{;}\NormalTok{ Solve to initial equilibrium}
\NormalTok{zone ratio local}
\NormalTok{model solve ratio }\FloatTok{1e{-}4}
\NormalTok{model save }\StringTok{\textquotesingle{}initial\textquotesingle{}}
\end{Highlighting}
\end{Shaded}

\hypertarget{alterations-1}{%
\section{Alterations}\label{alterations-1}}

\hypertarget{install-the-pile}{%
\subsection{install the pile}\label{install-the-pile}}

\begin{Shaded}
\begin{Highlighting}[]
\OperatorTok{;}\NormalTok{ install the pile}
\NormalTok{model restore }\StringTok{\textquotesingle{}initial\textquotesingle{}}
\NormalTok{zone cmodel assign elastic                          }\BuiltInTok{range}\NormalTok{ group }\StringTok{\textquotesingle{}pile\textquotesingle{}}
\NormalTok{zone }\BuiltInTok{property}\NormalTok{ bulk }\FloatTok{13.9e9}\NormalTok{ shear }\FloatTok{10.4e9}\NormalTok{ density }\DecValTok{2500} \BuiltInTok{range}\NormalTok{ group }\StringTok{\textquotesingle{}pile\textquotesingle{}}
\NormalTok{model solve ratio }\FloatTok{1e{-}4}
\NormalTok{model save }\StringTok{\textquotesingle{}install\textquotesingle{}}
\end{Highlighting}
\end{Shaded}

\hypertarget{vertical-loading}{%
\subsection{vertical loading}\label{vertical-loading}}

\begin{Shaded}
\begin{Highlighting}[]
\OperatorTok{;}\NormalTok{ vertical loading}
\NormalTok{zone initialize state }\DecValTok{0}
\NormalTok{zone gridpoint initialize displacement (}\DecValTok{0}\NormalTok{,}\DecValTok{0}\NormalTok{,}\DecValTok{0}\NormalTok{)}
\NormalTok{zone gridpoint initialize velocity     (}\DecValTok{0}\NormalTok{,}\DecValTok{0}\NormalTok{,}\DecValTok{0}\NormalTok{) }
\NormalTok{table }\StringTok{\textquotesingle{}ramp\textquotesingle{}}\NormalTok{ add ([}\KeywordTok{global}\NormalTok{.step],}\DecValTok{0}\NormalTok{) ([}\KeywordTok{global}\NormalTok{.step}\OperatorTok{+}\DecValTok{30000}\NormalTok{],}\OperatorTok{{-}}\FloatTok{5e{-}8}\NormalTok{) ...}
\NormalTok{      ([}\KeywordTok{global}\NormalTok{.step}\OperatorTok{+}\DecValTok{58000}\NormalTok{],}\OperatorTok{{-}}\FloatTok{5e{-}8}\NormalTok{) }\OperatorTok{;}\NormalTok{ Increase velocity applied to pile}
                                  \OperatorTok{;}\NormalTok{ over }\DecValTok{30}\NormalTok{,}\DecValTok{000}\NormalTok{ steps}
\NormalTok{zone face }\BuiltInTok{apply}\NormalTok{ velocity}\OperatorTok{{-}}\NormalTok{normal }\DecValTok{1}\NormalTok{ table }\StringTok{\textquotesingle{}ramp\textquotesingle{}} \BuiltInTok{range}\NormalTok{ group }\StringTok{\textquotesingle{}Top\textquotesingle{}}
\NormalTok{history interval }\DecValTok{250}
\NormalTok{zone history name }\StringTok{\textquotesingle{}disp\textquotesingle{}}\NormalTok{ displacement}\OperatorTok{{-}}\NormalTok{z position (}\DecValTok{0}\NormalTok{,}\DecValTok{0}\NormalTok{,}\DecValTok{0}\NormalTok{)}
\NormalTok{call }\StringTok{\textquotesingle{}load\textquotesingle{}}
\NormalTok{fish history name }\StringTok{\textquotesingle{}load\textquotesingle{}} \OperatorTok{@}\NormalTok{vert\_load}
\NormalTok{zone mechanical damping combined}
\NormalTok{model step }\DecValTok{58000}
\NormalTok{model save }\StringTok{\textquotesingle{}vertical{-}loading\textquotesingle{}}
\end{Highlighting}
\end{Shaded}

\hypertarget{vertical-then-lateral-loading}{%
\subsection{vertical then lateral loading}\label{vertical-then-lateral-loading}}

\begin{Shaded}
\begin{Highlighting}[]
\OperatorTok{;}\NormalTok{ vertical loading then lateral loading}
\NormalTok{model restore }\StringTok{\textquotesingle{}install\textquotesingle{}}
\NormalTok{zone initialize state }\DecValTok{0}
\NormalTok{zone gridpoint initialize displacement (}\DecValTok{0}\NormalTok{,}\DecValTok{0}\NormalTok{,}\DecValTok{0}\NormalTok{)}
\NormalTok{zone gridpoint initialize velocity     (}\DecValTok{0}\NormalTok{,}\DecValTok{0}\NormalTok{,}\DecValTok{0}\NormalTok{) }
\NormalTok{zone face }\BuiltInTok{apply}\NormalTok{ stress}\OperatorTok{{-}}\NormalTok{zz [}\OperatorTok{{-}}\FloatTok{1.0e5}\OperatorTok{/}\NormalTok{(math.pi}\OperatorTok{*}\FloatTok{0.3}\OperatorTok{*}\FloatTok{0.3}\NormalTok{)] }\BuiltInTok{range}\NormalTok{ group }\StringTok{\textquotesingle{}Top\textquotesingle{}}
\NormalTok{model solve ratio }\FloatTok{1e{-}4}
\NormalTok{model save }\StringTok{\textquotesingle{}lateral{-}load{-}start\textquotesingle{}}

\OperatorTok{;} \BuiltInTok{apply}\NormalTok{ lateral loading }\ImportTok{as}\NormalTok{ x}\OperatorTok{{-}}\NormalTok{velocity on cap}
\NormalTok{zone initialize state }\DecValTok{0}
\NormalTok{zone gridpoint initialize displacement (}\DecValTok{0}\NormalTok{,}\DecValTok{0}\NormalTok{,}\DecValTok{0}\NormalTok{)}
\NormalTok{zone gridpoint initialize velocity     (}\DecValTok{0}\NormalTok{,}\DecValTok{0}\NormalTok{,}\DecValTok{0}\NormalTok{) }
\NormalTok{zone face }\BuiltInTok{apply}\NormalTok{ velocity}\OperatorTok{{-}}\NormalTok{x }\FloatTok{1e{-}7} \BuiltInTok{range}\NormalTok{ group }\StringTok{\textquotesingle{}Top\textquotesingle{}}
\NormalTok{zone history name }\StringTok{\textquotesingle{}disp\textquotesingle{}}\NormalTok{ displacement}\OperatorTok{{-}}\NormalTok{x position }\DecValTok{0}\NormalTok{,}\DecValTok{0}\NormalTok{,}\DecValTok{0}
\NormalTok{call }\StringTok{\textquotesingle{}p{-}y\textquotesingle{}}\NormalTok{ suppress }\OperatorTok{;}\NormalTok{ Calculates p}\OperatorTok{{-}}\NormalTok{y curve }\ControlFlowTok{for}\NormalTok{ pile, when tot\_reac }\KeywordTok{is}\NormalTok{ called}
\AttributeTok{@make\_pydata}        \OperatorTok{;}\NormalTok{ Generate p}\OperatorTok{{-}}\NormalTok{y curve calculation data }
\AttributeTok{@output\_structure}   \OperatorTok{;}\NormalTok{ Sanity check of p}\OperatorTok{{-}}\NormalTok{y curve data }
\NormalTok{fish history name }\StringTok{\textquotesingle{}load\textquotesingle{}} \OperatorTok{@}\NormalTok{tot\_reac}
\NormalTok{model step }\DecValTok{416500}
\NormalTok{model save }\StringTok{\textquotesingle{}lateral{-}load\textquotesingle{}}
\end{Highlighting}
\end{Shaded}

\hypertarget{results-1}{%
\section{Results}\label{results-1}}

\newpage

\hypertarget{pull-tests}{%
\chapter{Pull-Tests}\label{pull-tests}}

\hypertarget{problem-description-1}{%
\section{Problem Description}\label{problem-description-1}}

\emph{note: FISH function force is used to sum the raction forces and
monitor nodal displacement generated by the pull-test.
}note: free length of bolt that extends out of block + larger diameter
Perfectly plastic behavior of grout = max cohesion is exceeded.
+post-peak weakening of shear bond strength
*note: bond strength softening of the grout is defined with keyword
coupling-cohesion-table (see Rockbolt Behavior)
The relation btw shear disp. and cohesion weakening is prescribed
thru table cct. softening of friction of grout can alsoe be defined
using keyword coupling-friction-table.

\hypertarget{problem-statement-1}{%
\subsection{Problem Statement}\label{problem-statement-1}}

\hypertarget{main-parameters-1}{%
\subsection{Main Parameters}\label{main-parameters-1}}

\hypertarget{modeling-procedure-1}{%
\section{Modeling Procedure}\label{modeling-procedure-1}}

\hypertarget{zones-1}{%
\section{Zones}\label{zones-1}}

\begin{Shaded}
\begin{Highlighting}[]
\OperatorTok{;} \OperatorTok{==================================================================}
\OperatorTok{;}\NormalTok{   Simulation of pull}\OperatorTok{{-}}\NormalTok{test }\ControlFlowTok{for}\NormalTok{ grouted reinforcement}
\OperatorTok{;}\NormalTok{   using modified pile elements }\OperatorTok{{-}}\NormalTok{ Softening of cohesion}
\OperatorTok{;} \OperatorTok{==================================================================}
\NormalTok{model new }
\NormalTok{fish automatic}\OperatorTok{{-}}\NormalTok{create off}
\NormalTok{model title }\StringTok{\textquotesingle{}Pull{-}test using modified pile elements {-} cohesion softening\textquotesingle{}}
\OperatorTok{;}\NormalTok{ Create a single rock block }\KeywordTok{and} \BuiltInTok{set}\NormalTok{ its material properties.}
\NormalTok{zone create brick size }\DecValTok{4} \DecValTok{4} \DecValTok{6}\NormalTok{ point }\DecValTok{1}\NormalTok{ (}\FloatTok{0.4}\NormalTok{,}\DecValTok{0}\NormalTok{,}\DecValTok{0}\NormalTok{) point }\DecValTok{2}\NormalTok{ (}\DecValTok{0}\NormalTok{,}\FloatTok{0.4}\NormalTok{,}\DecValTok{0}\NormalTok{) ...}
\NormalTok{                             point }\DecValTok{3}\NormalTok{ (}\DecValTok{0}\NormalTok{,}\DecValTok{0}\NormalTok{,}\FloatTok{0.6}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\hypertarget{groups-2}{%
\section{Groups}\label{groups-2}}

\hypertarget{properties-2}{%
\section{Properties}\label{properties-2}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{zone cmodel assign elastic}
\NormalTok{zone }\BuiltInTok{property}\NormalTok{ bulk }\FloatTok{5e9}\NormalTok{ shear }\FloatTok{3e9}
\NormalTok{zone face }\BuiltInTok{apply}\NormalTok{ velocity}\OperatorTok{{-}}\NormalTok{normal }\FloatTok{0.0} \BuiltInTok{range}\NormalTok{ position}\OperatorTok{{-}}\NormalTok{z }\FloatTok{0.6}
\OperatorTok{;}\NormalTok{ Create a pile element }\KeywordTok{and}\NormalTok{ assign properties}
\NormalTok{struct pile create by}\OperatorTok{{-}}\NormalTok{line (}\FloatTok{0.2}\NormalTok{,}\FloatTok{0.2}\NormalTok{,}\FloatTok{0.1}\NormalTok{) (}\FloatTok{0.2}\NormalTok{,}\FloatTok{0.2}\NormalTok{,}\FloatTok{0.7}\NormalTok{) segments }\DecValTok{12}
\NormalTok{struct pile }\BuiltInTok{property}\NormalTok{ rockbolt}\OperatorTok{{-}}\NormalTok{flag on}
\NormalTok{struct pile }\BuiltInTok{property}\NormalTok{ young }\FloatTok{200e9}\NormalTok{ poisson }\FloatTok{0.25}\NormalTok{ cross}\OperatorTok{{-}}\NormalTok{sectional}\OperatorTok{{-}}\NormalTok{area }\FloatTok{5e{-}4}\NormalTok{ ...}
\NormalTok{                     perimeter }\FloatTok{0.08}
\NormalTok{struct pile }\BuiltInTok{property}\NormalTok{ tensile}\OperatorTok{{-}}\ControlFlowTok{yield}   \FloatTok{2.25e5}  \OperatorTok{;}\NormalTok{ ultimate tensile strength}
\NormalTok{struct pile }\BuiltInTok{property}\NormalTok{ moi}\OperatorTok{{-}}\NormalTok{y }\FloatTok{2.0e{-}8}\NormalTok{ moi}\OperatorTok{{-}}\NormalTok{z }\FloatTok{2.0e{-}8}\NormalTok{ moi}\OperatorTok{{-}}\NormalTok{polar }\FloatTok{4.0e{-}8} \OperatorTok{;} \FloatTok{0.25}\OperatorTok{*}\NormalTok{pi}\OperatorTok{*}\NormalTok{r}\OperatorTok{\^{}}\DecValTok{4}
\NormalTok{struct pile }\BuiltInTok{property}\NormalTok{ coupling}\OperatorTok{{-}}\NormalTok{cohesion}\OperatorTok{{-}}\NormalTok{shear }\FloatTok{1.75e5}\NormalTok{ ...}
\NormalTok{                     coupling}\OperatorTok{{-}}\NormalTok{stiffness}\OperatorTok{{-}}\NormalTok{shear }\FloatTok{1.12e7}
\NormalTok{struct pile }\BuiltInTok{property}\NormalTok{ coupling}\OperatorTok{{-}}\NormalTok{cohesion}\OperatorTok{{-}}\NormalTok{normal }\FloatTok{1.75e5}\NormalTok{ ...}
\NormalTok{                     coupling}\OperatorTok{{-}}\NormalTok{stiffness}\OperatorTok{{-}}\NormalTok{normal }\FloatTok{1.12e7}
\NormalTok{struct pile }\BuiltInTok{property}\NormalTok{ coupling}\OperatorTok{{-}}\NormalTok{cohesion}\OperatorTok{{-}}\NormalTok{table }\StringTok{\textquotesingle{}cct\textquotesingle{}}
\OperatorTok{;}\NormalTok{ change }\KeywordTok{in}\NormalTok{ cohesion }\ControlFlowTok{with}\NormalTok{ relative shear displacement}
\NormalTok{table }\StringTok{\textquotesingle{}cct\textquotesingle{}}\NormalTok{ add (}\DecValTok{0}\NormalTok{,}\FloatTok{1.75e5}\NormalTok{) (}\FloatTok{0.025}\NormalTok{,}\FloatTok{1.75e4}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\hypertarget{b.c.-and-i.c.-2}{%
\section{B.C. and I.C.}\label{b.c.-and-i.c.-2}}

\hypertarget{initial-equilibrium-2}{%
\section{Initial Equilibrium}\label{initial-equilibrium-2}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{struct node fix velocity}\OperatorTok{{-}}\NormalTok{x }\BuiltInTok{range}\NormalTok{ position}\OperatorTok{{-}}\NormalTok{z }\FloatTok{0.7}
\NormalTok{struct node initialize velocity}\OperatorTok{{-}}\NormalTok{x }\FloatTok{1e{-}6}\NormalTok{ local }\BuiltInTok{range}\NormalTok{ position}\OperatorTok{{-}}\NormalTok{z }\FloatTok{0.7}
\NormalTok{call }\StringTok{\textquotesingle{}pileforce\textquotesingle{}}\NormalTok{ suppress }\OperatorTok{;}\NormalTok{ FISH function calculates reaction force on zones}
\end{Highlighting}
\end{Shaded}

\hypertarget{alterations-2}{%
\section{Alterations}\label{alterations-2}}

\begin{Shaded}
\begin{Highlighting}[]
\OperatorTok{;}\NormalTok{ Set up histories }\ControlFlowTok{for}\NormalTok{ monitoring model behavior}
\NormalTok{history interval }\DecValTok{10}
\NormalTok{fish history name }\StringTok{\textquotesingle{}force\textquotesingle{}} \OperatorTok{@}\NormalTok{force}
\NormalTok{struct node history name }\StringTok{\textquotesingle{}disp\textquotesingle{}}\NormalTok{ displacement}\OperatorTok{{-}}\NormalTok{z position (}\FloatTok{0.2}\NormalTok{,}\FloatTok{0.2}\NormalTok{,}\FloatTok{0.7}\NormalTok{)}
\OperatorTok{;}\NormalTok{ Achieve a total displacement of }\FloatTok{4.0}\NormalTok{ cm}
\NormalTok{model cycle }\DecValTok{40000}
\OperatorTok{;}
\NormalTok{model save }\StringTok{\textquotesingle{}pull{-}5\textquotesingle{}}
\end{Highlighting}
\end{Shaded}

\hypertarget{results-2}{%
\section{Results}\label{results-2}}

\hypertarget{some-other-notes}{%
\section{Some other notes}\label{some-other-notes}}

2.3. pull test with confinement ``Pulltest06.f3dat''
+modified pile logic.
(see Behavior of Shear Coupling Springs) linear law is implemented
whereby reinforcement shear strength is defined as constant
(coupling-cohesion-shear)+ effective pressure\emph{perimeter}fric angle(coupling-friction-shear)
This pressure dependence is activated automatically by issuing
reinforcement properties(perimeter) and (coupling-friction-shear)
2.4. pull test with confinement (user defined) ``Pulltest07.f3dat''
*note: use of coupling-confining-table to define ``mean sigma\_c, confining stress''

2.5. pull test with tensile rupture ``Pulltest08.f3dat''
*note: tensile-yield, tensile-failure-strain: for limiting axial yield force and limiting axial strain for rockbolt

\newpage

\hypertarget{grid-generation-1}{%
\chapter{Grid Generation}\label{grid-generation-1}}

The intention of grid generation is to fit the model grid to the physical region under study

\hypertarget{primitive-shape}{%
\section{Primitive Shape}\label{primitive-shape}}

\includegraphics[width=1\linewidth]{myfigureeeeee/radial-cylinder}

\includegraphics[width=1\linewidth]{myfigureeeeee/radial-square}

zones for grids
-primitives (zone create) (zone reflect) (zone copy)

\includegraphics[width=1\linewidth]{myfigureeeeee/example-FLAC3D-Model}

-dimension
-edge
-fill
-point
-ratio
-size

-extrusions
-building blocks
(mutually exclusive)
-3rd party tool Rhino and mesher Griddle

selection of right mesh generation method
and efficient deploymentis a critical part

\emph{note: zone create generates primitive grid
}note: zone gridpoint create puts gridpoints at specific locations
\emph{note: zone gridpoint merge ensures separate primitives are connected properly
}note: zone attach connects primitive meshes of different zone sizes.
each shape has specific type of grid connectivity.

keywords for zone create:
brick, weidge, uniform-wedge, tetrahedron, pyramid, cylinder, degenerate-brick, radial-brick, radial-tunnel, radial-cylinder, cylindrical-shell, cylindrical-intersection, tunnel-intersection(parallelpiped-shaped tunnels)

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{zone create radial}\OperatorTok{{-}}\NormalTok{cylinder size }\DecValTok{5} \DecValTok{10} \DecValTok{6} \DecValTok{12}\NormalTok{ fill}
\NormalTok{zone create radial}\OperatorTok{{-}}\NormalTok{cylinder size }\DecValTok{5} \DecValTok{10} \DecValTok{6} \DecValTok{12}\NormalTok{ ratio }\DecValTok{1} \DecValTok{1} \DecValTok{1} \DecValTok{5}
\NormalTok{each size }\KeywordTok{is}\NormalTok{ controlled by a ratio (geometric ratio of }\FloatTok{1.2}\NormalTok{ times preceding zone)}
\end{Highlighting}
\end{Shaded}

ex) 5 along innder radius of cylindrical tunnel,
10 along axis
6 along circumference of tunnel
12 between periphery of tunnel and outer boundary of moel
*note: size keyword defines the number of zones in the grid.

keywords for zone create
-dimension
-edge
-fill
-point (boundary dimensions)
-ratio (coarser toward edge)
-size

\hypertarget{several-primitive-shapes-connected}{%
\section{several primitive shapes connected:}\label{several-primitive-shapes-connected}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{zone create radial}\OperatorTok{{-}}\NormalTok{cylinder size }\DecValTok{5} \DecValTok{10} \DecValTok{6} \DecValTok{12}\NormalTok{ rat }\DecValTok{1} \DecValTok{1} \DecValTok{1} \FloatTok{1.2}\NormalTok{ ...}
\NormalTok{                           point }\DecValTok{0}\NormalTok{ (}\DecValTok{0}\NormalTok{,}\DecValTok{0}\NormalTok{,}\DecValTok{0}\NormalTok{) point }\DecValTok{1}\NormalTok{ (}\DecValTok{100}\NormalTok{,}\DecValTok{0}\NormalTok{,}\DecValTok{0}\NormalTok{) ...}
\NormalTok{                           point }\DecValTok{2}\NormalTok{ (}\DecValTok{0}\NormalTok{,}\DecValTok{200}\NormalTok{,}\DecValTok{0}\NormalTok{) point }\DecValTok{3}\NormalTok{ (}\DecValTok{0}\NormalTok{,}\DecValTok{0}\NormalTok{,}\DecValTok{100}\NormalTok{)}
\NormalTok{zone create radial}\OperatorTok{{-}}\NormalTok{tunnel size }\DecValTok{5} \DecValTok{10} \DecValTok{5} \DecValTok{12}\NormalTok{ rat }\DecValTok{1} \DecValTok{1} \DecValTok{1} \FloatTok{1.2}\NormalTok{ ...}
\NormalTok{                          point }\DecValTok{0}\NormalTok{ (}\DecValTok{0}\NormalTok{,}\DecValTok{0}\NormalTok{,}\DecValTok{0}\NormalTok{) point }\DecValTok{1}\NormalTok{ (}\DecValTok{0}\NormalTok{,}\DecValTok{0}\NormalTok{,}\OperatorTok{{-}}\DecValTok{100}\NormalTok{) ...}
\NormalTok{                          point }\DecValTok{2}\NormalTok{ (}\DecValTok{0}\NormalTok{,}\DecValTok{200}\NormalTok{,}\DecValTok{0}\NormalTok{) point }\DecValTok{3}\NormalTok{ (}\DecValTok{100}\NormalTok{,}\DecValTok{0}\NormalTok{,}\DecValTok{0}\NormalTok{)}
\OperatorTok{;}\NormalTok{ here, model boundary dimensions are }\DecValTok{100}\NormalTok{, }\DecValTok{200}\NormalTok{, }\DecValTok{100}
\OperatorTok{;}\NormalTok{ boundary coord are defined using point keyword}

\NormalTok{zone reflect dip }\DecValTok{90}\NormalTok{ dip}\OperatorTok{{-}}\NormalTok{direction }\DecValTok{270}\NormalTok{ origin (}\DecValTok{0}\NormalTok{,}\DecValTok{0}\NormalTok{,}\DecValTok{0}\NormalTok{) }
\end{Highlighting}
\end{Shaded}

this adds symmetric part
*note: The symmetry plane is a vertical plane (located by the dip, dip-direction, and origin keywords) coincident with the x = 0 plane. Note that dip angle (dip) and dip direction (dip-direction) assume that x corresponds to ``East,'' y to ``North'', and z to ``Up.''

third option, the zone gridpoint create command, is available to position single points in the model region.
*note: zone gridpoint create is used for positioning reference points of primitives

During execution of a zone create command, a check is made for each boundary gridpoint against the boundary gridpoints of zones that already exist.
If two boundary gridpoints fall within a tolerance of 1 ? 10-7 (relative to the magnitude of the gridpoints position vector) of each other, they are assumed to be the same point,
If it is discovered that some gridpoints don't match, the zone gridpoint merge command can be used to merge these gridpoints after the zone create command has been applied.

(zone attach) - Two unequal sub-grids

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{zone create brick size }\DecValTok{4} \DecValTok{4} \DecValTok{2}\NormalTok{ point }\DecValTok{0}\NormalTok{ (}\DecValTok{0}\NormalTok{,}\DecValTok{0}\NormalTok{,}\DecValTok{0}\NormalTok{) point }\DecValTok{1}\NormalTok{ (}\DecValTok{4}\NormalTok{,}\DecValTok{0}\NormalTok{,}\DecValTok{0}\NormalTok{) ...}
\NormalTok{                             point }\DecValTok{2}\NormalTok{ (}\DecValTok{0}\NormalTok{,}\DecValTok{4}\NormalTok{,}\DecValTok{0}\NormalTok{) point }\DecValTok{3}\NormalTok{ (}\DecValTok{0}\NormalTok{,}\DecValTok{0}\NormalTok{,}\DecValTok{2}\NormalTok{)}
\NormalTok{zone create brick size }\DecValTok{8} \DecValTok{8} \DecValTok{4}\NormalTok{ point }\DecValTok{0}\NormalTok{ (}\DecValTok{0}\NormalTok{,}\DecValTok{0}\NormalTok{,}\DecValTok{2}\NormalTok{) point }\DecValTok{1}\NormalTok{ (}\DecValTok{4}\NormalTok{,}\DecValTok{0}\NormalTok{,}\DecValTok{2}\NormalTok{) ...}
\NormalTok{                             point }\DecValTok{2}\NormalTok{ (}\DecValTok{0}\NormalTok{,}\DecValTok{4}\NormalTok{,}\DecValTok{2}\NormalTok{) point }\DecValTok{3}\NormalTok{ (}\DecValTok{0}\NormalTok{,}\DecValTok{0}\NormalTok{,}\DecValTok{4}\NormalTok{)}
\NormalTok{zone attach by}\OperatorTok{{-}}\NormalTok{face }\BuiltInTok{range}\NormalTok{ position}\OperatorTok{{-}}\NormalTok{z }\DecValTok{2}
\end{Highlighting}
\end{Shaded}

(zone densify)

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{zone create brick size }\DecValTok{4} \DecValTok{4} \DecValTok{4}
\NormalTok{zone densify segments }\DecValTok{2} \BuiltInTok{range}\NormalTok{ position}\OperatorTok{{-}}\NormalTok{x }\DecValTok{2} \DecValTok{4}
\end{Highlighting}
\end{Shaded}

the first two command lines can be changed to
where zone densify segments 2 refines the upper zones (between the z-coordinate of 2 and 4) with the segment number of 2 on each edge.

\hypertarget{structural-element-operation}{%
\section{Structural Element Operation}\label{structural-element-operation}}

Creating a liner in the service tunnel

\begin{Shaded}
\begin{Highlighting}[]
\OperatorTok{;}\NormalTok{ liner}
\NormalTok{structure shell create by}\OperatorTok{{-}}\NormalTok{face }\BuiltInTok{range}\NormalTok{ cylinder ...}
\NormalTok{                                     end}\OperatorTok{{-}}\DecValTok{1}\NormalTok{ (}\DecValTok{0}\NormalTok{,}\DecValTok{0}\NormalTok{,}\OperatorTok{{-}}\DecValTok{1}\NormalTok{) end}\OperatorTok{{-}}\DecValTok{2}\NormalTok{ (}\DecValTok{0}\NormalTok{,}\DecValTok{50}\NormalTok{,}\OperatorTok{{-}}\DecValTok{1}\NormalTok{) ...}
\NormalTok{                                     radius }\DecValTok{3}
\end{Highlighting}
\end{Shaded}

The liner contains 240 structural shell elements and is connected to the FLAC3D grid at 143 structural-node links. The grid with the liner is shown below.

\hypertarget{densifying-grid-by-specifying-max-size-length}{%
\section{Densifying grid by specifying max size length}\label{densifying-grid-by-specifying-max-size-length}}

\hypertarget{densify-a-grid-by-specifying-the-maximum-size-length}{%
\subsection{Densify a grid by specifying the maximum size length}\label{densify-a-grid-by-specifying-the-maximum-size-length}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{model new}
\NormalTok{zone create brick size }\DecValTok{4} \DecValTok{4} \DecValTok{4}
\NormalTok{plot }\StringTok{\textquotesingle{}Brick\textquotesingle{}}\NormalTok{ export bitmap filename }\StringTok{\textquotesingle{}densify3.png\textquotesingle{}}
\OperatorTok{;}
\NormalTok{zone densify local maximum}\OperatorTok{{-}}\NormalTok{length (}\FloatTok{0.5}\NormalTok{,}\FloatTok{0.5}\NormalTok{,}\FloatTok{0.4}\NormalTok{) }\BuiltInTok{range}\NormalTok{ position}\OperatorTok{{-}}\NormalTok{z }\DecValTok{2} \DecValTok{4}
\NormalTok{zone attach by}\OperatorTok{{-}}\NormalTok{face}
\OperatorTok{;}
\NormalTok{plot }\StringTok{\textquotesingle{}Brick\textquotesingle{}}\NormalTok{ export bitmap filename }\StringTok{\textquotesingle{}densify4.png\textquotesingle{}}
\end{Highlighting}
\end{Shaded}

note that in the local z-direction, the maximum size length is 0.4. FLAC3D densifies the maximum length in this direction to be 1/3 (= 0.4)
The zone attach by-face command in this example is used to attach faces of sub-grids together rigidly to form a single grid

Always use the zone attach by-face command after the zone densify command if there are different numbers of gridpoints along faces of different zones.

\hypertarget{densify-a-grid-using-geometric-information}{%
\subsection{Densify a grid using geometric information}\label{densify-a-grid-using-geometric-information}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{model new}
\NormalTok{zone create brick size }\DecValTok{10} \DecValTok{10} \DecValTok{10}
\OperatorTok{;}
\NormalTok{geometry }\BuiltInTok{set} \StringTok{"setA"}\NormalTok{ polygon create ...}
\NormalTok{                    by}\OperatorTok{{-}}\NormalTok{positions (}\DecValTok{0}\NormalTok{,}\DecValTok{0}\NormalTok{,}\DecValTok{1}\NormalTok{) ( }\DecValTok{5}\NormalTok{,}\DecValTok{0}\NormalTok{, }\DecValTok{1}\NormalTok{) ( }\DecValTok{5}\NormalTok{,}\DecValTok{10}\NormalTok{, }\DecValTok{1}\NormalTok{) (}\DecValTok{0}\NormalTok{,}\DecValTok{10}\NormalTok{,}\DecValTok{1}\NormalTok{)}
\NormalTok{geometry }\BuiltInTok{set} \StringTok{"setA"}\NormalTok{ polygon create ...}
\NormalTok{                    by}\OperatorTok{{-}}\NormalTok{positions (}\DecValTok{5}\NormalTok{,}\DecValTok{0}\NormalTok{,}\DecValTok{1}\NormalTok{) (}\DecValTok{10}\NormalTok{,}\DecValTok{0}\NormalTok{, }\DecValTok{5}\NormalTok{) (}\DecValTok{10}\NormalTok{,}\DecValTok{10}\NormalTok{, }\DecValTok{5}\NormalTok{) (}\DecValTok{5}\NormalTok{,}\DecValTok{10}\NormalTok{,}\DecValTok{1}\NormalTok{)}
\NormalTok{geometry }\BuiltInTok{set} \StringTok{"setB"}\NormalTok{ polygon create ...}
\NormalTok{                    by}\OperatorTok{{-}}\NormalTok{positions (}\DecValTok{0}\NormalTok{,}\DecValTok{0}\NormalTok{,}\DecValTok{5}\NormalTok{) ( }\DecValTok{5}\NormalTok{,}\DecValTok{0}\NormalTok{, }\DecValTok{5}\NormalTok{) ( }\DecValTok{5}\NormalTok{,}\DecValTok{10}\NormalTok{, }\DecValTok{5}\NormalTok{) (}\DecValTok{0}\NormalTok{,}\DecValTok{10}\NormalTok{,}\DecValTok{5}\NormalTok{)}
\NormalTok{geometry }\BuiltInTok{set} \StringTok{"setB"}\NormalTok{ polygon create ...}
\NormalTok{                    by}\OperatorTok{{-}}\NormalTok{positions (}\DecValTok{5}\NormalTok{,}\DecValTok{0}\NormalTok{,}\DecValTok{5}\NormalTok{) (}\DecValTok{10}\NormalTok{,}\DecValTok{0}\NormalTok{,}\DecValTok{10}\NormalTok{) (}\DecValTok{10}\NormalTok{,}\DecValTok{10}\NormalTok{,}\DecValTok{10}\NormalTok{) (}\DecValTok{5}\NormalTok{,}\DecValTok{10}\NormalTok{,}\DecValTok{5}\NormalTok{)}
\NormalTok{plot }\StringTok{\textquotesingle{}Brick2\textquotesingle{}}\NormalTok{ export bitmap filename }\StringTok{\textquotesingle{}densify5.png\textquotesingle{}}

\NormalTok{zone densify segments }\DecValTok{2} \BuiltInTok{range}\NormalTok{ geometry}\OperatorTok{{-}}\NormalTok{space }\StringTok{"setA"} \BuiltInTok{set} \StringTok{"setB"}\NormalTok{ count }\DecValTok{1}
\NormalTok{zone attach by}\OperatorTok{{-}}\NormalTok{face}
\OperatorTok{;}
\NormalTok{plot }\StringTok{\textquotesingle{}Brick2\textquotesingle{}}\NormalTok{ export bitmap filename }\StringTok{\textquotesingle{}densify6.png\textquotesingle{}}
\end{Highlighting}
\end{Shaded}

\newpage

\hypertarget{using-python-with-flac3d}{%
\chapter{Using Python with FLAC3D}\label{using-python-with-flac3d}}

\hypertarget{introduction}{%
\section{Introduction}\label{introduction}}

\begin{Shaded}
\begin{Highlighting}[]
\ImportTok{import}\NormalTok{ itasca }\ImportTok{as}\NormalTok{ it}
\NormalTok{it.command(}\StringTok{"python{-}reset{-}state false"}\NormalTok{)}
\NormalTok{it.command(}\StringTok{"""}
\StringTok{model new}
\StringTok{zone create brick size 10 10 10}
\StringTok{zone cmodel assign elastic}
\StringTok{zone property density 2950 young 12e9 poisson 0.25}
\StringTok{cycle 1}
\StringTok{"""}\NormalTok{)}
\NormalTok{it.zone.count()}
\NormalTok{z}\OperatorTok{=}\NormalTok{it.zone.find(}\DecValTok{1}\NormalTok{)}
\BuiltInTok{print}\NormalTok{ z}
\NormalTok{z.pos()}
\NormalTok{volume\_sum }\OperatorTok{=} \FloatTok{0.0}
\ControlFlowTok{for}\NormalTok{ z }\KeywordTok{in}\NormalTok{ it.zone.}\BuiltInTok{list}\NormalTok{():}
\NormalTok{  volume\_sum }\OperatorTok{+=}\NormalTok{ z.vol()}

\BuiltInTok{print}\NormalTok{ volume\_sum}
\BuiltInTok{print}\NormalTok{ z.vol() }\OperatorTok{*}\NormalTok{ it.zone.count()}
\ControlFlowTok{assert}\NormalTok{ volume\_sum }\OperatorTok{==}\NormalTok{ z.vol() }\OperatorTok{*}\NormalTok{ it.zone.count()}

\NormalTok{z }\OperatorTok{=}\NormalTok{ it.zone.near ((}\DecValTok{5}\NormalTok{,}\DecValTok{5}\NormalTok{,}\DecValTok{5}\NormalTok{))}
\NormalTok{z.pos()}
\end{Highlighting}
\end{Shaded}

\hypertarget{zones-2}{%
\section{Zones}\label{zones-2}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{it.zone.count() }\CommentTok{\# 1000}
\NormalTok{z }\OperatorTok{=}\NormalTok{ it.zone.find(}\DecValTok{1}\NormalTok{)}
\ControlFlowTok{for}\NormalTok{ z }\KeywordTok{in}\NormalTok{ it.zone.}\BuiltInTok{list}\NormalTok{():}
\NormalTok{  z }\OperatorTok{=}\NormalTok{ it.zone.near((}\DecValTok{5}\NormalTok{,}\DecValTok{5}\NormalTok{,}\DecValTok{5}\NormalTok{))}
\NormalTok{z.pos()}
\NormalTok{z.vol()}
\end{Highlighting}
\end{Shaded}

\hypertarget{properties-3}{%
\section{Properties}\label{properties-3}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{z.props() }\KeywordTok{or}\NormalTok{ z.props()[}\StringTok{\textquotesingle{}bulk\textquotesingle{}}\NormalTok{]}
\NormalTok{z.prop(}\StringTok{\textquotesingle{}shear\textquotesingle{}}\NormalTok{)}
\NormalTok{z.set\_prop(}\StringTok{\textquotesingle{}bulk\textquotesingle{}}\NormalTok{, }\FloatTok{8.5e9}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\hypertarget{gridpoints}{%
\section{Gridpoints}\label{gridpoints}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{gp }\OperatorTok{=}\NormalTok{ it.gridpoint.near((}\DecValTok{2}\NormalTok{,}\DecValTok{2}\NormalTok{,}\DecValTok{2}\NormalTok{))}
\ControlFlowTok{for}\NormalTok{ gp }\KeywordTok{in}\NormalTok{ it.gridpoint.}\BuiltInTok{list}\NormalTok{():}
\NormalTok{  total\_mass }\OperatorTok{=}\NormalTok{ gp.mass\_gravity()}
\NormalTok{z.vol()}\OperatorTok{*}\NormalTok{z.density()}\OperatorTok{*}\DecValTok{1000}
\end{Highlighting}
\end{Shaded}

\hypertarget{structural-elements}{%
\section{Structural Elements}\label{structural-elements}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{it.structure.}\BuiltInTok{list}\NormalTok{()}
\NormalTok{it.structure.find(}\DecValTok{1}\NormalTok{)}
\NormalTok{it.structure.near((}\DecValTok{0}\NormalTok{,}\DecValTok{2}\NormalTok{,}\DecValTok{2}\NormalTok{))}
\NormalTok{it.structure.node.find(}\DecValTok{1}\NormalTok{)}
\NormalTok{s\_node.links()[}\DecValTok{0}\NormalTok{]}
\end{Highlighting}
\end{Shaded}

\hypertarget{extra-variables}{%
\section{Extra Variables}\label{extra-variables}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{z.set\_extra(}\DecValTok{1}\NormalTok{, }\FloatTok{1.23}\NormalTok{)}
\NormalTok{z.set\_extra(}\DecValTok{2}\NormalTok{, }\StringTok{"a test string"}\NormalTok{)}
\NormalTok{z.set\_extra(}\DecValTok{1}\NormalTok{, gp.pos())}
\end{Highlighting}
\end{Shaded}

\hypertarget{groups-and-b.c.}{%
\section{Groups and B.C.}\label{groups-and-b.c.}}

\begin{Shaded}
\begin{Highlighting}[]
\ControlFlowTok{if}\NormalTok{ z.group(}\StringTok{"default"}\NormalTok{) }\OperatorTok{==} \StringTok{"lower"}\NormalTok{:}
\NormalTok{  gp.set\_fix(}\DecValTok{0}\NormalTok{, }\VariableTok{True}\NormalTok{)}
\NormalTok{  gp.set\_fix(}\DecValTok{1}\NormalTok{, }\VariableTok{True}\NormalTok{)}
\NormalTok{  gp.set\_force\_load((}\FloatTok{1e6}\NormalTok{,}\FloatTok{2e6}\NormalTok{,}\FloatTok{1e6}\NormalTok{))}
\NormalTok{it.zone.near((}\DecValTok{5}\NormalTok{,}\DecValTok{5}\NormalTok{,}\DecValTok{5}\NormalTok{)).stress()}
\NormalTok{it.zone.near((}\DecValTok{5}\NormalTok{,}\DecValTok{5}\NormalTok{,}\DecValTok{5}\NormalTok{)).strain()}
\CommentTok{"""}
\end{Highlighting}
\end{Shaded}

\hypertarget{parameteric-studies}{%
\section{Parameteric Studies}\label{parameteric-studies}}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{"*note: for modulus in [6e9, 8e9, 10e9, 12e9]:"}
\NormalTok{it.command(}\StringTok{"""}
\StringTok{model restore \textquotesingle{}before\_cycling\textquotesingle{}}
\StringTok{zone prop young }\SpecialCharTok{\{\}}
\StringTok{model solve}
\StringTok{"""}\NormalTok{.}\BuiltInTok{format}\NormalTok{(modulus))}
\NormalTok{vertical\_disp }\OperatorTok{=}\NormalTok{ it.gridpoint.near((}\DecValTok{5}\NormalTok{,}\DecValTok{5}\NormalTok{,}\DecValTok{10}\NormalTok{)).disp\_z()}
\BuiltInTok{print} \StringTok{"\textasciitilde{}\textasciitilde{}\textasciitilde{}"}\NormalTok{.}\BuiltInTok{format}\NormalTok{(modulus,vertical\_disp)}
\end{Highlighting}
\end{Shaded}

\hypertarget{setting-fish-variables}{%
\section{Setting FISH variables}\label{setting-fish-variables}}

\begin{Shaded}
\begin{Highlighting}[]
\ImportTok{import}\NormalTok{ itasca }\ImportTok{as}\NormalTok{ it}
\NormalTok{it.command(}\StringTok{\textquotesingle{}python{-}reset{-}state false\textquotesingle{}}\NormalTok{)}
\NormalTok{it.fish.}\BuiltInTok{set}\NormalTok{(}\StringTok{\textquotesingle{}x\textquotesingle{}}\NormalTok{, }\DecValTok{10}\NormalTok{)}
\NormalTok{x }\OperatorTok{=}\NormalTok{ it.fish.get(}\StringTok{\textquotesingle{}x\textquotesingle{}}\NormalTok{) yields }\DecValTok{10}
\end{Highlighting}
\end{Shaded}

\hypertarget{issuing-command}{%
\subsection{Issuing Command}\label{issuing-command}}

\begin{Shaded}
\begin{Highlighting}[]
\ImportTok{import}\NormalTok{ itasca }\ImportTok{as}\NormalTok{ it}
\ImportTok{import}\NormalTok{ numpy }\ImportTok{as}\NormalTok{ np}
\NormalTok{data }\OperatorTok{=}\NormalTok{ np.loadtext(}\StringTok{\textquotesingle{}brick{-}data.txt\textquotesingle{}}\NormalTok{)}
\NormalTok{command\_template }\OperatorTok{=} \OperatorTok{;;;} 
\NormalTok{zone create brick}
\NormalTok{zone cmodel assign elastic}
\NormalTok{zone }\BuiltInTok{property}\NormalTok{ density \{density\} young \{young\} poisson \{poisson\}}
\OperatorTok{;;;}
\NormalTok{density }\OperatorTok{=}\NormalTok{ data[}\DecValTok{0}\NormalTok{]}
\NormalTok{young }\OperatorTok{=}\NormalTok{ data[}\DecValTok{1}\NormalTok{]}
\NormalTok{poisson }\OperatorTok{=}\NormalTok{ data[}\DecValTok{2}\NormalTok{]}

\NormalTok{command }\OperatorTok{=}\NormalTok{ command\_template.}\BuiltInTok{format}\NormalTok{(density}\OperatorTok{=}\NormalTok{density, young}\OperatorTok{=}\NormalTok{young, poisson}\OperatorTok{=}\NormalTok{poisson)}
\NormalTok{it.command(command)}
\end{Highlighting}
\end{Shaded}

\hypertarget{string}{%
\section{String}\label{string}}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{"The value of x is \{:.2f\}"}\NormalTok{.}\BuiltInTok{format}\NormalTok{(}\FloatTok{0.3872}\NormalTok{)}
\CommentTok{"The value of x is \{:.2e\}"}\NormalTok{.}\BuiltInTok{format}\NormalTok{(}\FloatTok{0.3872}\NormalTok{)}
\CommentTok{"My name is Sasha"}
\CommentTok{"My name is \{\}"}\NormalTok{.}\BuiltInTok{format}\NormalTok{(}\StringTok{"Sasha"}\NormalTok{)}
\CommentTok{"My name is \{name\}"}\NormalTok{.}\BuiltInTok{format}\NormalTok{(name}\OperatorTok{=}\StringTok{"Sasha"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\startappendices

\hypertarget{appendix-1.-template}{%
\chapter{Appendix 1. Template}\label{appendix-1.-template}}

\hypertarget{problem-description-2}{%
\section{Problem Description}\label{problem-description-2}}

\hypertarget{problem-statement-2}{%
\subsection{Problem Statement}\label{problem-statement-2}}

\hypertarget{main-parameters-2}{%
\subsection{Main Parameters}\label{main-parameters-2}}

\hypertarget{modeling-procedure-2}{%
\section{Modeling Procedure}\label{modeling-procedure-2}}

\hypertarget{zones-3}{%
\section{Zones}\label{zones-3}}

\hypertarget{groups-3}{%
\section{Groups}\label{groups-3}}

\hypertarget{properties-4}{%
\section{Properties}\label{properties-4}}

\hypertarget{b.c.-and-i.c.-3}{%
\section{B.C. and I.C.}\label{b.c.-and-i.c.-3}}

\hypertarget{initial-equilibrium-3}{%
\section{Initial Equilibrium}\label{initial-equilibrium-3}}

\hypertarget{alterations-3}{%
\section{Alterations}\label{alterations-3}}

\hypertarget{results-3}{%
\section{Results}\label{results-3}}

\hypertarget{literature-compilation}{%
\chapter{Literature Compilation}\label{literature-compilation}}

\hypertarget{uplift-resistance-of-anchor-plate}{%
\subsection{Uplift Resistance of Anchor Plate}\label{uplift-resistance-of-anchor-plate}}

\hypertarget{before-1968}{%
\subsubsection{Before 1968}\label{before-1968}}

\begin{itemize}
\tightlist
\item
  Coulomb
\item
  Mohr
\item
  Kotter's equation
\item
  Balla (1961)
\item
  Mors
\item
  Matsuo
\end{itemize}

\hypertarget{post-1968}{%
\subsubsection{Post-1968}\label{post-1968}}

\begin{itemize}
\tightlist
\item
  Meyerhof, G.G., and Adams, J.I. 1968
\item
  Meyerhof, G.G. 1973
\item
  Das, B.M., and Seeley, G.R. 1975
\item
  Rowe, R.K., and Davis, H. 1982
\item
  Dickin, E.A., and Leung, C.F. 1983
\item
  Murray, E.J., and Geddes, J.D. 1987
\item
  Dickin, E.A. 1988
\item
  Koutsabeloulis, N.C., and Griffiths, D.V. 1989
  \#\#\#\# Post-2000
\item
  Merifield, R.S., and Sloan, S.W. 2006
\end{itemize}

\hypertarget{numerical-analysis}{%
\subsection{Numerical Analysis}\label{numerical-analysis}}

\hypertarget{standards}{%
\subsection{Standards}\label{standards}}

\begin{itemize}
\tightlist
\item
  IEEE 2001
\item
  DS 1110, DS 1111
\end{itemize}

\hypertarget{textbook}{%
\subsection{Textbook}\label{textbook}}

\begin{itemize}
\tightlist
\item
  Das, B. M. 2013. Earth Anchors
\end{itemize}

\hypertarget{ph.d-thesis}{%
\subsection{Ph.D Thesis}\label{ph.d-thesis}}

\hypertarget{award-lecture}{%
\subsection{Award Lecture}\label{award-lecture}}


%%%%% REFERENCES
\setlength{\baselineskip}{0pt} % JEM: Single-space References

{\renewcommand*\MakeUppercase[1]{#1}%
\printbibliography[heading=bibintoc,title={\bibtitle}]}


\end{document}
