%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% OXFORD THESIS TEMPLATE

% Use this template to produce a standard thesis that meets the Oxford University requirements for DPhil submission
%
% Originally by Keith A. Gillow (gillow@maths.ox.ac.uk), 1997
% Modified by Sam Evans (sam@samuelevansresearch.org), 2007
% Modified by John McManigle (john@oxfordechoes.com), 2015
% Modified by Ulrik Lyngs (ulrik.lyngs@cs.ox.ac.uk), 2018-, for use with R Markdown
%
% Ulrik Lyngs, 25 Nov 2018: Following John McManigle, broad permissions are granted to use, modify, and distribute this software
% as specified in the MIT License included in this distribution's LICENSE file.
%
% John commented this file extensively, so read through to see how to use the various options.  Remember that in LaTeX,
% any line starting with a % is NOT executed.  Several places below, you have a choice of which line to use
% out of multiple options (eg draft vs final, for PDF vs for binding, etc.)  When you pick one, add a % to the beginning of
% the lines you don't want.


%%%%% PAGE LAYOUT
% The most common choices should be below.  You can also do other things, like replacing "a4paper" with "letterpaper", etc.

% This one formats for two-sided binding (ie left and right pages have mirror margins; blank pages inserted where needed):
%\documentclass[a4paper,twoside]{templates/ociamthesis}
% This one formats for one-sided binding (ie left margin > right margin; no extra blank pages):
%\documentclass[a4paper]{ociamthesis}
% This one formats for PDF output (ie equal margins, no extra blank pages):
%\documentclass[a4paper,nobind]{templates/ociamthesis}

% As you can see from the uncommented line below, oxforddown template uses the a4paper size, 
% and passes in the binding option from the YAML header in index.Rmd:
\documentclass[a4paper, nobind]{templates/ociamthesis}


%%%%% ADDING LATEX PACKAGES
% add hyperref package with options from YAML %
\usepackage[pdfpagelabels]{hyperref}
% change the default coloring of links to something sensible
\usepackage{xcolor}
\usepackage[hangul]{kotex}


\definecolor{mylinkcolor}{RGB}{0,0,139}
\definecolor{myurlcolor}{RGB}{0,0,139}
\definecolor{mycitecolor}{RGB}{0,33,71}

\hypersetup{
  hidelinks,
  colorlinks,
  linktocpage=true,
  linkcolor=mylinkcolor,
  urlcolor=myurlcolor,
  citecolor=mycitecolor
}



% add float package to allow manual control of figure positioning %
\usepackage{float}

% enable strikethrough
\usepackage[normalem]{ulem}

% use soul package for correction highlighting
\usepackage{color, soul}
\definecolor{correctioncolor}{HTML}{CCCCFF}
\sethlcolor{correctioncolor}
\newcommand{\ctext}[3][RGB]{%
  \begingroup
  \definecolor{hlcolor}{#1}{#2}\sethlcolor{hlcolor}%
  \hl{#3}%
  \endgroup
}
\soulregister\ref7
\soulregister\cite7
\soulregister\autocite7
\soulregister\textcite7
\soulregister\pageref7

%%%%% FIXING / ADDING THINGS THAT'S SPECIAL TO R MARKDOWN'S USE OF LATEX TEMPLATES
% pandoc puts lists in 'tightlist' command when no space between bullet points in Rmd file,
% so we add this command to the template
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
 
% UL 1 Dec 2018, fix to include code in shaded environments
\usepackage{color}
\usepackage{fancyvrb}
\newcommand{\VerbBar}{|}
\newcommand{\VERB}{\Verb[commandchars=\\\{\}]}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
% Add ',fontsize=\small' for more characters per line
\usepackage{framed}
\definecolor{shadecolor}{RGB}{248,248,248}
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}
\newcommand{\AlertTok}[1]{\textcolor[rgb]{0.94,0.16,0.16}{#1}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.77,0.63,0.00}{#1}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\BuiltInTok}[1]{#1}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{#1}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{0.64,0.00,0.00}{\textbf{#1}}}
\newcommand{\ExtensionTok}[1]{#1}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ImportTok}[1]{#1}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\NormalTok}[1]{#1}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.81,0.36,0.00}{\textbf{#1}}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{#1}}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\RegionMarkerTok}[1]{#1}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}

%UL set white space before and after code blocks
\renewenvironment{Shaded}
{
  \vspace{10pt}%
  \begin{snugshade}%
}{%
  \end{snugshade}%
  \vspace{8pt}%
}

% User-included things with header_includes or in_header will appear here
% kableExtra packages will appear here if you use library(kableExtra)
\usepackage{booktabs}
\usepackage{longtable}
\usepackage{array}
\usepackage{multirow}
\usepackage{wrapfig}
\usepackage{float}
\usepackage{colortbl}
\usepackage{pdflscape}
\usepackage{tabu}
\usepackage{threeparttable}
\usepackage{threeparttablex}
\usepackage[normalem]{ulem}
\usepackage{makecell}
\usepackage{xcolor}


%UL set section header spacing
\usepackage{titlesec}
% 
\titlespacing\subsubsection{0pt}{24pt plus 4pt minus 2pt}{0pt plus 2pt minus 2pt}


%UL set whitespace around verbatim environments
\usepackage{etoolbox}
\makeatletter
\preto{\@verbatim}{\topsep=0pt \partopsep=0pt }
\makeatother



%%%%%%% PAGE HEADERS AND FOOTERS %%%%%%%%%
\usepackage{fancyhdr}
\setlength{\headheight}{15pt}
\fancyhf{} % clear the header and footers
\pagestyle{fancy}
\renewcommand{\chaptermark}[1]{\markboth{\thechapter. #1}{\thechapter. #1}}
\renewcommand{\sectionmark}[1]{\markright{\thesection. #1}} 
\renewcommand{\headrulewidth}{0pt}

\fancyhead[LO]{\emph{\leftmark}} 
\fancyhead[RE]{\emph{\rightmark}} 

% UL page number position 
\fancyfoot[C]{\emph{\thepage}} %regular pages
\fancypagestyle{plain}{\fancyhf{}\fancyfoot[C]{\emph{\thepage}}} %chapter pages

% JEM fix header on cleared pages for openright
\def\cleardoublepage{\clearpage\if@twoside \ifodd\c@page\else
   \hbox{}
   \fancyfoot[C]{}
   \newpage
   \if@twocolumn\hbox{}\newpage
   \fi
   \fancyhead[LO]{\emph{\leftmark}} 
   \fancyhead[RE]{\emph{\rightmark}} 
   \fi\fi}


%%%%% SELECT YOUR DRAFT OPTIONS
% This adds a "DRAFT" footer to every normal page.  (The first page of each chapter is not a "normal" page.)

% IP feb 2021: option to include line numbers in PDF

% This highlights (in blue) corrections marked with (for words) \mccorrect{blah} or (for whole
% paragraphs) \begin{mccorrection} . . . \end{mccorrection}.  This can be useful for sending a PDF of
% your corrected thesis to your examiners for review.  Turn it off, and the blue disappears.
\correctionstrue


%%%%% BIBLIOGRAPHY SETUP
% Note that your bibliography will require some tweaking depending on your department, preferred format, etc.
% If you've not used LaTeX before, I recommend reading a little about biblatex/biber and getting started with it.
% If you're already a LaTeX pro and are used to natbib or something, modify as necessary.
% Either way, you'll have to choose and configure an appropriate bibliography format...


\usepackage[style=authoryear, sorting=nyt, backend=biber, maxcitenames=2, useprefix, doi=true, isbn=false, uniquename=false]{biblatex}
\newcommand*{\bibtitle}{Works Cited}

\addbibresource{bibliography/references.bib}
\addbibresource{bibliography/additional-references.bib}


% This makes the bibliography left-aligned (not 'justified') and slightly smaller font.
\renewcommand*{\bibfont}{\raggedright\small}


% Uncomment this if you want equation numbers per section (2.3.12), instead of per chapter (2.18):
%\numberwithin{equation}{subsection}


%%%%% THESIS / TITLE PAGE INFORMATION
% Everybody needs to complete the following:
\title{\texttt{FLAC3D} Repository}
\author{Kyeong Sun Kim}
\college{Civil and Environmental Engineering}

% Master's candidates who require the alternate title page (with candidate number and word count)
% must also un-comment and complete the following three lines:

% Uncomment the following line if your degree also includes exams (eg most masters):
%\renewcommand{\submittedtext}{Submitted in partial completion of the}
% Your full degree name.  (But remember that DPhils aren't "in" anything.  They're just DPhils.)
\degree{}
% Term and year of submission, or date if your board requires (eg most masters)
\degreedate{Sept, 2021}


%%%%% YOUR OWN PERSONAL MACROS
% This is a good place to dump your own LaTeX macros as they come up.

% To make text superscripts shortcuts
	\renewcommand{\th}{\textsuperscript{th}} % ex: I won 4\th place
	\newcommand{\nd}{\textsuperscript{nd}}
	\renewcommand{\st}{\textsuperscript{st}}
	\newcommand{\rd}{\textsuperscript{rd}}

%%%%% THE ACTUAL DOCUMENT STARTS HERE
\begin{document}

%%%%% CHOOSE YOUR LINE SPACING HERE
% This is the official option.  Use it for your submission copy and library copy:
\setlength{\textbaselineskip}{22pt plus2pt}
% This is closer spacing (about 1.5-spaced) that you might prefer for your personal copies:
%\setlength{\textbaselineskip}{18pt plus2pt minus1pt}

% You can set the spacing here for the roman-numbered pages (acknowledgements, table of contents, etc.)
\setlength{\frontmatterbaselineskip}{17pt plus1pt minus1pt}

% UL: You can set the line and paragraph spacing here for the separate abstract page to be handed in to Examination schools
\setlength{\abstractseparatelineskip}{13pt plus1pt minus1pt}
\setlength{\abstractseparateparskip}{0pt plus 1pt}

% UL: You can set the general paragraph spacing here - I've set it to 2pt (was 0) so
% it's less claustrophobic
\setlength{\parskip}{2pt plus 1pt}

%
% Oxford University logo on title page
%
\def\crest{{\includegraphics[width=5cm]{templates/snupdf.pdf}}}
\renewcommand{\university}{Seoul National University}
\renewcommand{\submittedtext}{}


% Leave this line alone; it gets things started for the real document.
\setlength{\baselineskip}{\textbaselineskip}


%%%%% CHOOSE YOUR SECTION NUMBERING DEPTH HERE
% You have two choices.  First, how far down are sections numbered?  (Below that, they're named but
% don't get numbers.)  Second, what level of section appears in the table of contents?  These don't have
% to match: you can have numbered sections that don't show up in the ToC, or unnumbered sections that
% do.  Throughout, 0 = chapter; 1 = section; 2 = subsection; 3 = subsubsection, 4 = paragraph...

% The level that gets a number:
\setcounter{secnumdepth}{2}
% The level that shows up in the ToC:
\setcounter{tocdepth}{1}


%%%%% ABSTRACT SEPARATE
% This is used to create the separate, one-page abstract that you are required to hand into the Exam
% Schools.  You can comment it out to generate a PDF for printing or whatnot.

% JEM: Pages are roman numbered from here, though page numbers are invisible until ToC.  This is in
% keeping with most typesetting conventions.
\begin{romanpages}

% Title page is created here
\maketitle

%%%%% DEDICATION -- If you'd like one, un-comment the following.

%%%%% ACKNOWLEDGEMENTS -- Nothing to do here except comment out if you don't want it.


%%%%% ABSTRACT -- Nothing to do here except comment out if you don't want it.
%\begin{abstract}
%	
%\end{abstract}

%%%%% MINI TABLES
% This lays the groundwork for per-chapter, mini tables of contents.  Comment the following line
% (and remove \minitoc from the chapter files) if you don't want this.  Un-comment either of the
% next two lines if you want a per-chapter list of figures or tables.

% This aligns the bottom of the text of each page.  It generally makes things look better.
\flushbottom

% This is where the whole-document ToC appears:
%\tableofcontents


% Uncomment to generate a list of tables:
%%%%% LIST OF ABBREVIATIONS
% This example includes a list of abbreviations.  Look at text/abbreviations.tex to see how that file is
% formatted.  The template can handle any kind of list though, so this might be a good place for a
% glossary, etc.

% The Roman pages, like the Roman Empire, must come to its inevitable close.
\end{romanpages}

%%%%% CHAPTERS
% Add or remove any chapters you'd like here, by file name (excluding '.tex'):
\flushbottom

% all your chapters and appendices will appear here
\minitoc

\hypertarget{using-python-with-flac3d}{%
\chapter{\texorpdfstring{Using \texttt{Python} with \texttt{FLAC3D}}{Using Python with FLAC3D}}\label{using-python-with-flac3d}}

\hypertarget{geometry-grid-zone}{%
\section{Geometry, Grid, Zone}\label{geometry-grid-zone}}

The \texttt{itasca} module defines functions and classes for interaction between \texttt{Python} and \texttt{FLAC3D}.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{"""}
\CommentTok{import itasca as it}
\CommentTok{it.command("python{-}reset{-}state false")}
\CommentTok{"""}
\end{Highlighting}
\end{Shaded}

The \texttt{it.command} function is used to issue a series of \texttt{FLAC3D} commands.

The \texttt{it.zone.count} function creates 1000 zones

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{"""}
\CommentTok{it.zone.count() \# outputs 1000}
\CommentTok{"""}
\end{Highlighting}
\end{Shaded}

The \texttt{it.zone.find(1)} returns a Zone object with id 1. The object is assigned to the \texttt{Python} variable \(z\).

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{"""}
\CommentTok{z = it.zone.find(1)}
\CommentTok{print z \# outputs \textless{}itasca.zone.Zone object at 0x00000001B388600, ID : 1\textgreater{}}
\CommentTok{z.pos() \# outputs vec3(( 5.00000e{-}01, 5.00000e{-}01, 5.00000e{-}01))}
\CommentTok{"""}
\end{Highlighting}
\end{Shaded}

The variable \(z\) is a Zone object (\texttt{FLAC3D} zone)

\texttt{pos} method of this object returns the zone centroid.

\texttt{for} statement is used to iterate over sequences of things,
Loop over all \texttt{FLAC3D} zones.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{"""}
\CommentTok{volume\_sum = 0.0}
\CommentTok{for z in it.zone.list():}
\CommentTok{  volume\_sum += z.vol()}
\CommentTok{"""}
\end{Highlighting}
\end{Shaded}

Check that the sum of the zone volumes is what we expect.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{"""}
\CommentTok{print volume\_sum \# outputs 1000.0}
\CommentTok{print z.vol() * it.zone.count()}
\CommentTok{assert volume\_sum == z.vol() * it.zone.count() \# outputs 1000.0}
\CommentTok{"""}
\end{Highlighting}
\end{Shaded}

Let's find a zone near the center of the model

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{"""}
\CommentTok{z = it.zone.near ((5,5,5))}
\CommentTok{\#confirm position with pos method}
\CommentTok{z.pos() \# outputs vec3(( 4.500000e+00, 4.500000e+00, 4.500000e+00))}
\CommentTok{"""}
\end{Highlighting}
\end{Shaded}

\hypertarget{group-range}{%
\section{Group, Range}\label{group-range}}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{"""}

\CommentTok{"""}
\end{Highlighting}
\end{Shaded}

\hypertarget{constitutive-model}{%
\section{Constitutive Model}\label{constitutive-model}}

\hypertarget{b.c.-and-i.c.}{%
\section{B.C. and I.C.}\label{b.c.-and-i.c.}}

\hypertarget{step-to-equilibrium}{%
\section{Step to Equilibrium}\label{step-to-equilibrium}}

\hypertarget{support-structure-restore}{%
\section{Support, Structure, Restore}\label{support-structure-restore}}

\hypertarget{plot}{%
\section{Plot}\label{plot}}

\hypertarget{illustrative-model-mechanics-of-flac3d}{%
\chapter{\texorpdfstring{Illustrative Model -- Mechanics of \texttt{FLAC3D}}{Illustrative Model -- Mechanics of FLAC3D}}\label{illustrative-model-mechanics-of-flac3d}}

\hypertarget{geometry-grid-zone-1}{%
\section{Geometry, Grid, Zone}\label{geometry-grid-zone-1}}

\hypertarget{group-range-1}{%
\section{Group, Range}\label{group-range-1}}

\hypertarget{constitutive-model-1}{%
\section{Constitutive Model}\label{constitutive-model-1}}

\hypertarget{b.c.-and-i.c.-1}{%
\section{B.C. and I.C.}\label{b.c.-and-i.c.-1}}

\hypertarget{step-to-equilibrium-1}{%
\section{Step to Equilibrium}\label{step-to-equilibrium-1}}

\hypertarget{support-structure-restore-1}{%
\section{Support, Structure, Restore}\label{support-structure-restore-1}}

\hypertarget{plot-1}{%
\section{Plot}\label{plot-1}}

\hypertarget{axial-and-lateral-loading-of-a-concrete-pile}{%
\chapter{Axial and Lateral Loading of a Concrete Pile}\label{axial-and-lateral-loading-of-a-concrete-pile}}

\hypertarget{geometry-grid-zone-2}{%
\section{Geometry, Grid, Zone}\label{geometry-grid-zone-2}}

\hypertarget{group-range-2}{%
\section{Group, Range}\label{group-range-2}}

\hypertarget{constitutive-model-2}{%
\section{Constitutive Model}\label{constitutive-model-2}}

\hypertarget{b.c.-and-i.c.-2}{%
\section{B.C. and I.C.}\label{b.c.-and-i.c.-2}}

\hypertarget{step-to-equilibrium-2}{%
\section{Step to Equilibrium}\label{step-to-equilibrium-2}}

\hypertarget{support-structure-restore-2}{%
\section{Support, Structure, Restore}\label{support-structure-restore-2}}

\hypertarget{plot-2}{%
\section{Plot}\label{plot-2}}

\hypertarget{smooth-circular-footing-on-an-associated-mohr-coulomb-material}{%
\chapter{Smooth Circular Footing on an Associated Mohr-Coulomb Material}\label{smooth-circular-footing-on-an-associated-mohr-coulomb-material}}

\hypertarget{geometry-grid-zone-3}{%
\section{Geometry, Grid, Zone}\label{geometry-grid-zone-3}}

\hypertarget{group-range-3}{%
\section{Group, Range}\label{group-range-3}}

\hypertarget{constitutive-model-3}{%
\section{Constitutive Model}\label{constitutive-model-3}}

\hypertarget{b.c.-and-i.c.-3}{%
\section{B.C. and I.C.}\label{b.c.-and-i.c.-3}}

\hypertarget{step-to-equilibrium-3}{%
\section{Step to Equilibrium}\label{step-to-equilibrium-3}}

\hypertarget{support-structure-restore-3}{%
\section{Support, Structure, Restore}\label{support-structure-restore-3}}

\hypertarget{plot-3}{%
\section{Plot}\label{plot-3}}


%%%%% REFERENCES
\setlength{\baselineskip}{0pt} % JEM: Single-space References

{\renewcommand*\MakeUppercase[1]{#1}%
\printbibliography[heading=bibintoc,title={\bibtitle}]}


\end{document}
