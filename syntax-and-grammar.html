<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>5 Syntax and Grammar | FLAC3D Gitbook</title>
<meta name="author" content="Kyeong Sun Kim">
<meta name="generator" content="bookdown 0.23 with bs4_book()">
<meta property="og:title" content="5 Syntax and Grammar | FLAC3D Gitbook">
<meta property="og:type" content="book">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="5 Syntax and Grammar | FLAC3D Gitbook">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/header-attrs-2.10/header-attrs.js"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.2.5.9002/transition.js"></script><script src="libs/bs3compat-0.2.5.9002/tabs.js"></script><script src="libs/bs3compat-0.2.5.9002/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><link rel="stylesheet" href="templates/bs4_style.css">
<link rel="stylesheet" href="templates/corrections.css">
<meta name="description" content='5.1 Introduction import itasca as it it.command("python-reset-state false") it.command(""" model new zone create brick size 10 10 10 zone cmodel assign elastic zone property density 2950 young...'>
<meta property="og:description" content='5.1 Introduction import itasca as it it.command("python-reset-state false") it.command(""" model new zone create brick size 10 10 10 zone cmodel assign elastic zone property density 2950 young...'>
<meta name="twitter:description" content='5.1 Introduction import itasca as it it.command("python-reset-state false") it.command(""" model new zone create brick size 10 10 10 zone cmodel assign elastic zone property density 2950 young...'>
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title=""><p><code>FLAC3D</code> Gitbook</p></a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Welcome</a></li>
<li><a class="" href="kaist-model.html"><span class="header-section-number">1</span> KAIST Model</a></li>
<li><a class="" href="axial-concrete-pile.html"><span class="header-section-number">2</span> Axial Concrete Pile</a></li>
<li><a class="" href="pull-tests.html"><span class="header-section-number">3</span> Pull-Tests</a></li>
<li><a class="" href="grid.html"><span class="header-section-number">4</span> Grid</a></li>
<li><a class="active" href="syntax-and-grammar.html"><span class="header-section-number">5</span> Syntax and Grammar</a></li>
<li><a class="" href="code-block.html"><span class="header-section-number">6</span> Code Block</a></li>
<li><a class="" href="theory.html"><span class="header-section-number">7</span> Theory</a></li>
<li class="book-part">Appendix</li>
<li><a class="" href="template.html"><span class="header-section-number">A</span> 1. Template</a></li>
<li><a class="" href="reference-collective.html"><span class="header-section-number">B</span> Reference Collective</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/ulyngs/oxforddown">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="syntax-and-grammar" class="section level1" number="5">
<h1>
<span class="header-section-number">5</span> Syntax and Grammar<a class="anchor" aria-label="anchor" href="#syntax-and-grammar"><i class="fas fa-link"></i></a>
</h1>
<div id="introduction" class="section level2" number="5.1">
<h2>
<span class="header-section-number">5.1</span> Introduction<a class="anchor" aria-label="anchor" href="#introduction"><i class="fas fa-link"></i></a>
</h2>
<div class="sourceCode" id="cb26"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb26-1"><a href="syntax-and-grammar.html#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> itasca <span class="im">as</span> it</span>
<span id="cb26-2"><a href="syntax-and-grammar.html#cb26-2" aria-hidden="true" tabindex="-1"></a>it.command(<span class="st">"python-reset-state false"</span>)</span>
<span id="cb26-3"><a href="syntax-and-grammar.html#cb26-3" aria-hidden="true" tabindex="-1"></a>it.command(<span class="st">"""</span></span>
<span id="cb26-4"><a href="syntax-and-grammar.html#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="st">model new</span></span>
<span id="cb26-5"><a href="syntax-and-grammar.html#cb26-5" aria-hidden="true" tabindex="-1"></a><span class="st">zone create brick size 10 10 10</span></span>
<span id="cb26-6"><a href="syntax-and-grammar.html#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="st">zone cmodel assign elastic</span></span>
<span id="cb26-7"><a href="syntax-and-grammar.html#cb26-7" aria-hidden="true" tabindex="-1"></a><span class="st">zone property density 2950 young 12e9 poisson 0.25</span></span>
<span id="cb26-8"><a href="syntax-and-grammar.html#cb26-8" aria-hidden="true" tabindex="-1"></a><span class="st">cycle 1</span></span>
<span id="cb26-9"><a href="syntax-and-grammar.html#cb26-9" aria-hidden="true" tabindex="-1"></a><span class="st">"""</span>)</span>
<span id="cb26-10"><a href="syntax-and-grammar.html#cb26-10" aria-hidden="true" tabindex="-1"></a>it.zone.count()</span>
<span id="cb26-11"><a href="syntax-and-grammar.html#cb26-11" aria-hidden="true" tabindex="-1"></a>z<span class="op">=</span>it.zone.find(<span class="dv">1</span>)</span>
<span id="cb26-12"><a href="syntax-and-grammar.html#cb26-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span> z</span>
<span id="cb26-13"><a href="syntax-and-grammar.html#cb26-13" aria-hidden="true" tabindex="-1"></a>z.pos()</span>
<span id="cb26-14"><a href="syntax-and-grammar.html#cb26-14" aria-hidden="true" tabindex="-1"></a>volume_sum <span class="op">=</span> <span class="fl">0.0</span></span>
<span id="cb26-15"><a href="syntax-and-grammar.html#cb26-15" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> z <span class="kw">in</span> it.zone.<span class="bu">list</span>():</span>
<span id="cb26-16"><a href="syntax-and-grammar.html#cb26-16" aria-hidden="true" tabindex="-1"></a>  volume_sum <span class="op">+=</span> z.vol()</span>
<span id="cb26-17"><a href="syntax-and-grammar.html#cb26-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-18"><a href="syntax-and-grammar.html#cb26-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span> volume_sum</span>
<span id="cb26-19"><a href="syntax-and-grammar.html#cb26-19" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span> z.vol() <span class="op">*</span> it.zone.count()</span>
<span id="cb26-20"><a href="syntax-and-grammar.html#cb26-20" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> volume_sum <span class="op">==</span> z.vol() <span class="op">*</span> it.zone.count()</span>
<span id="cb26-21"><a href="syntax-and-grammar.html#cb26-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-22"><a href="syntax-and-grammar.html#cb26-22" aria-hidden="true" tabindex="-1"></a>z <span class="op">=</span> it.zone.near ((<span class="dv">5</span>,<span class="dv">5</span>,<span class="dv">5</span>))</span>
<span id="cb26-23"><a href="syntax-and-grammar.html#cb26-23" aria-hidden="true" tabindex="-1"></a>z.pos()</span></code></pre></div>
</div>
<div id="zones-3" class="section level2" number="5.2">
<h2>
<span class="header-section-number">5.2</span> Zones<a class="anchor" aria-label="anchor" href="#zones-3"><i class="fas fa-link"></i></a>
</h2>
<div class="sourceCode" id="cb27"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb27-1"><a href="syntax-and-grammar.html#cb27-1" aria-hidden="true" tabindex="-1"></a>it.zone.count() <span class="co"># 1000</span></span>
<span id="cb27-2"><a href="syntax-and-grammar.html#cb27-2" aria-hidden="true" tabindex="-1"></a>z <span class="op">=</span> it.zone.find(<span class="dv">1</span>)</span>
<span id="cb27-3"><a href="syntax-and-grammar.html#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> z <span class="kw">in</span> it.zone.<span class="bu">list</span>():</span>
<span id="cb27-4"><a href="syntax-and-grammar.html#cb27-4" aria-hidden="true" tabindex="-1"></a>  z <span class="op">=</span> it.zone.near((<span class="dv">5</span>,<span class="dv">5</span>,<span class="dv">5</span>))</span>
<span id="cb27-5"><a href="syntax-and-grammar.html#cb27-5" aria-hidden="true" tabindex="-1"></a>z.pos()</span>
<span id="cb27-6"><a href="syntax-and-grammar.html#cb27-6" aria-hidden="true" tabindex="-1"></a>z.vol()</span></code></pre></div>
</div>
<div id="properties-2" class="section level2" number="5.3">
<h2>
<span class="header-section-number">5.3</span> Properties<a class="anchor" aria-label="anchor" href="#properties-2"><i class="fas fa-link"></i></a>
</h2>
<div class="sourceCode" id="cb28"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb28-1"><a href="syntax-and-grammar.html#cb28-1" aria-hidden="true" tabindex="-1"></a>z.props() <span class="kw">or</span> z.props()[<span class="st">'bulk'</span>]</span>
<span id="cb28-2"><a href="syntax-and-grammar.html#cb28-2" aria-hidden="true" tabindex="-1"></a>z.prop(<span class="st">'shear'</span>)</span>
<span id="cb28-3"><a href="syntax-and-grammar.html#cb28-3" aria-hidden="true" tabindex="-1"></a>z.set_prop(<span class="st">'bulk'</span>, <span class="fl">8.5e9</span>)</span></code></pre></div>
</div>
<div id="gridpoints" class="section level2" number="5.4">
<h2>
<span class="header-section-number">5.4</span> Gridpoints<a class="anchor" aria-label="anchor" href="#gridpoints"><i class="fas fa-link"></i></a>
</h2>
<div class="sourceCode" id="cb29"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb29-1"><a href="syntax-and-grammar.html#cb29-1" aria-hidden="true" tabindex="-1"></a>gp <span class="op">=</span> it.gridpoint.near((<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">2</span>))</span>
<span id="cb29-2"><a href="syntax-and-grammar.html#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> gp <span class="kw">in</span> it.gridpoint.<span class="bu">list</span>():</span>
<span id="cb29-3"><a href="syntax-and-grammar.html#cb29-3" aria-hidden="true" tabindex="-1"></a>  total_mass <span class="op">=</span> gp.mass_gravity()</span>
<span id="cb29-4"><a href="syntax-and-grammar.html#cb29-4" aria-hidden="true" tabindex="-1"></a>z.vol()<span class="op">*</span>z.density()<span class="op">*</span><span class="dv">1000</span></span></code></pre></div>
</div>
<div id="structural-elements" class="section level2" number="5.5">
<h2>
<span class="header-section-number">5.5</span> Structural Elements<a class="anchor" aria-label="anchor" href="#structural-elements"><i class="fas fa-link"></i></a>
</h2>
<div class="sourceCode" id="cb30"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb30-1"><a href="syntax-and-grammar.html#cb30-1" aria-hidden="true" tabindex="-1"></a>it.structure.<span class="bu">list</span>()</span>
<span id="cb30-2"><a href="syntax-and-grammar.html#cb30-2" aria-hidden="true" tabindex="-1"></a>it.structure.find(<span class="dv">1</span>)</span>
<span id="cb30-3"><a href="syntax-and-grammar.html#cb30-3" aria-hidden="true" tabindex="-1"></a>it.structure.near((<span class="dv">0</span>,<span class="dv">2</span>,<span class="dv">2</span>))</span>
<span id="cb30-4"><a href="syntax-and-grammar.html#cb30-4" aria-hidden="true" tabindex="-1"></a>it.structure.node.find(<span class="dv">1</span>)</span>
<span id="cb30-5"><a href="syntax-and-grammar.html#cb30-5" aria-hidden="true" tabindex="-1"></a>s_node.links()[<span class="dv">0</span>]</span></code></pre></div>
</div>
<div id="extra-variables" class="section level2" number="5.6">
<h2>
<span class="header-section-number">5.6</span> Extra Variables<a class="anchor" aria-label="anchor" href="#extra-variables"><i class="fas fa-link"></i></a>
</h2>
<div class="sourceCode" id="cb31"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb31-1"><a href="syntax-and-grammar.html#cb31-1" aria-hidden="true" tabindex="-1"></a>z.set_extra(<span class="dv">1</span>, <span class="fl">1.23</span>)</span>
<span id="cb31-2"><a href="syntax-and-grammar.html#cb31-2" aria-hidden="true" tabindex="-1"></a>z.set_extra(<span class="dv">2</span>, <span class="st">"a test string"</span>)</span>
<span id="cb31-3"><a href="syntax-and-grammar.html#cb31-3" aria-hidden="true" tabindex="-1"></a>z.set_extra(<span class="dv">1</span>, gp.pos())</span></code></pre></div>
</div>
<div id="groups-and-b.c." class="section level2" number="5.7">
<h2>
<span class="header-section-number">5.7</span> Groups and B.C.<a class="anchor" aria-label="anchor" href="#groups-and-b.c."><i class="fas fa-link"></i></a>
</h2>
<div class="sourceCode" id="cb32"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb32-1"><a href="syntax-and-grammar.html#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> z.group(<span class="st">"default"</span>) <span class="op">==</span> <span class="st">"lower"</span>:</span>
<span id="cb32-2"><a href="syntax-and-grammar.html#cb32-2" aria-hidden="true" tabindex="-1"></a>  gp.set_fix(<span class="dv">0</span>, <span class="va">True</span>)</span>
<span id="cb32-3"><a href="syntax-and-grammar.html#cb32-3" aria-hidden="true" tabindex="-1"></a>  gp.set_fix(<span class="dv">1</span>, <span class="va">True</span>)</span>
<span id="cb32-4"><a href="syntax-and-grammar.html#cb32-4" aria-hidden="true" tabindex="-1"></a>  gp.set_force_load((<span class="fl">1e6</span>,<span class="fl">2e6</span>,<span class="fl">1e6</span>))</span>
<span id="cb32-5"><a href="syntax-and-grammar.html#cb32-5" aria-hidden="true" tabindex="-1"></a>it.zone.near((<span class="dv">5</span>,<span class="dv">5</span>,<span class="dv">5</span>)).stress()</span>
<span id="cb32-6"><a href="syntax-and-grammar.html#cb32-6" aria-hidden="true" tabindex="-1"></a>it.zone.near((<span class="dv">5</span>,<span class="dv">5</span>,<span class="dv">5</span>)).strain()</span>
<span id="cb32-7"><a href="syntax-and-grammar.html#cb32-7" aria-hidden="true" tabindex="-1"></a><span class="co">"""</span></span></code></pre></div>
</div>
<div id="parameteric-studies" class="section level2" number="5.8">
<h2>
<span class="header-section-number">5.8</span> Parameteric Studies<a class="anchor" aria-label="anchor" href="#parameteric-studies"><i class="fas fa-link"></i></a>
</h2>
<div class="sourceCode" id="cb33"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb33-1"><a href="syntax-and-grammar.html#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co">"*note: for modulus in [6e9, 8e9, 10e9, 12e9]:"</span></span>
<span id="cb33-2"><a href="syntax-and-grammar.html#cb33-2" aria-hidden="true" tabindex="-1"></a>it.command(<span class="st">"""</span></span>
<span id="cb33-3"><a href="syntax-and-grammar.html#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="st">model restore 'before_cycling'</span></span>
<span id="cb33-4"><a href="syntax-and-grammar.html#cb33-4" aria-hidden="true" tabindex="-1"></a><span class="st">zone prop young </span><span class="sc">{}</span></span>
<span id="cb33-5"><a href="syntax-and-grammar.html#cb33-5" aria-hidden="true" tabindex="-1"></a><span class="st">model solve</span></span>
<span id="cb33-6"><a href="syntax-and-grammar.html#cb33-6" aria-hidden="true" tabindex="-1"></a><span class="st">"""</span>.<span class="bu">format</span>(modulus))</span>
<span id="cb33-7"><a href="syntax-and-grammar.html#cb33-7" aria-hidden="true" tabindex="-1"></a>vertical_disp <span class="op">=</span> it.gridpoint.near((<span class="dv">5</span>,<span class="dv">5</span>,<span class="dv">10</span>)).disp_z()</span>
<span id="cb33-8"><a href="syntax-and-grammar.html#cb33-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span> <span class="st">"~~~"</span>.<span class="bu">format</span>(modulus,vertical_disp)</span></code></pre></div>
</div>
<div id="setting-fish-variables" class="section level2" number="5.9">
<h2>
<span class="header-section-number">5.9</span> Setting FISH variables<a class="anchor" aria-label="anchor" href="#setting-fish-variables"><i class="fas fa-link"></i></a>
</h2>
<div class="sourceCode" id="cb34"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb34-1"><a href="syntax-and-grammar.html#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> itasca <span class="im">as</span> it</span>
<span id="cb34-2"><a href="syntax-and-grammar.html#cb34-2" aria-hidden="true" tabindex="-1"></a>it.command(<span class="st">'python-reset-state false'</span>)</span>
<span id="cb34-3"><a href="syntax-and-grammar.html#cb34-3" aria-hidden="true" tabindex="-1"></a>it.fish.<span class="bu">set</span>(<span class="st">'x'</span>, <span class="dv">10</span>)</span>
<span id="cb34-4"><a href="syntax-and-grammar.html#cb34-4" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> it.fish.get(<span class="st">'x'</span>) yields <span class="dv">10</span></span></code></pre></div>
<div id="issuing-command" class="section level3" number="5.9.1">
<h3>
<span class="header-section-number">5.9.1</span> Issuing Command<a class="anchor" aria-label="anchor" href="#issuing-command"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb35"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb35-1"><a href="syntax-and-grammar.html#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> itasca <span class="im">as</span> it</span>
<span id="cb35-2"><a href="syntax-and-grammar.html#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb35-3"><a href="syntax-and-grammar.html#cb35-3" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> np.loadtext(<span class="st">'brick-data.txt'</span>)</span>
<span id="cb35-4"><a href="syntax-and-grammar.html#cb35-4" aria-hidden="true" tabindex="-1"></a>command_template <span class="op">=</span> <span class="op">;;;</span> </span>
<span id="cb35-5"><a href="syntax-and-grammar.html#cb35-5" aria-hidden="true" tabindex="-1"></a>zone create brick</span>
<span id="cb35-6"><a href="syntax-and-grammar.html#cb35-6" aria-hidden="true" tabindex="-1"></a>zone cmodel assign elastic</span>
<span id="cb35-7"><a href="syntax-and-grammar.html#cb35-7" aria-hidden="true" tabindex="-1"></a>zone <span class="bu">property</span> density {density} young {young} poisson {poisson}</span>
<span id="cb35-8"><a href="syntax-and-grammar.html#cb35-8" aria-hidden="true" tabindex="-1"></a><span class="op">;;;</span></span>
<span id="cb35-9"><a href="syntax-and-grammar.html#cb35-9" aria-hidden="true" tabindex="-1"></a>density <span class="op">=</span> data[<span class="dv">0</span>]</span>
<span id="cb35-10"><a href="syntax-and-grammar.html#cb35-10" aria-hidden="true" tabindex="-1"></a>young <span class="op">=</span> data[<span class="dv">1</span>]</span>
<span id="cb35-11"><a href="syntax-and-grammar.html#cb35-11" aria-hidden="true" tabindex="-1"></a>poisson <span class="op">=</span> data[<span class="dv">2</span>]</span>
<span id="cb35-12"><a href="syntax-and-grammar.html#cb35-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-13"><a href="syntax-and-grammar.html#cb35-13" aria-hidden="true" tabindex="-1"></a>command <span class="op">=</span> command_template.<span class="bu">format</span>(density<span class="op">=</span>density, young<span class="op">=</span>young, poisson<span class="op">=</span>poisson)</span>
<span id="cb35-14"><a href="syntax-and-grammar.html#cb35-14" aria-hidden="true" tabindex="-1"></a>it.command(command)</span></code></pre></div>
</div>
</div>
<div id="string" class="section level2" number="5.10">
<h2>
<span class="header-section-number">5.10</span> String<a class="anchor" aria-label="anchor" href="#string"><i class="fas fa-link"></i></a>
</h2>
<div class="sourceCode" id="cb36"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb36-1"><a href="syntax-and-grammar.html#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co">"The value of x is {:.2f}"</span>.<span class="bu">format</span>(<span class="fl">0.3872</span>)</span>
<span id="cb36-2"><a href="syntax-and-grammar.html#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="co">"The value of x is {:.2e}"</span>.<span class="bu">format</span>(<span class="fl">0.3872</span>)</span>
<span id="cb36-3"><a href="syntax-and-grammar.html#cb36-3" aria-hidden="true" tabindex="-1"></a><span class="co">"My name is Sasha"</span></span>
<span id="cb36-4"><a href="syntax-and-grammar.html#cb36-4" aria-hidden="true" tabindex="-1"></a><span class="co">"My name is {}"</span>.<span class="bu">format</span>(<span class="st">"Sasha"</span>)</span>
<span id="cb36-5"><a href="syntax-and-grammar.html#cb36-5" aria-hidden="true" tabindex="-1"></a><span class="co">"My name is {name}"</span>.<span class="bu">format</span>(name<span class="op">=</span><span class="st">"Sasha"</span>)</span></code></pre></div>
</div>
<div id="fish-syntax" class="section level2" number="5.11">
<h2>
<span class="header-section-number">5.11</span> Fish Syntax<a class="anchor" aria-label="anchor" href="#fish-syntax"><i class="fas fa-link"></i></a>
</h2>
<div id="use-of" class="section level3" number="5.11.1">
<h3>
<span class="header-section-number">5.11.1</span> Use of …<a class="anchor" aria-label="anchor" href="#use-of"><i class="fas fa-link"></i></a>
</h3>
<p>A complete FISH statement occupies one line. However, a line may be typed across two or more lines as long as each line but the ultimate is terminated with the continuation character ( … ). Use of temporary variables as hinge points to concatenate lengthy formulas can also be handy. The following example shows how this can be done:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb37-1"><a href="syntax-and-grammar.html#cb37-1" aria-hidden="true" tabindex="-1"></a>fish define long_sum  <span class="op">;</span>example of a <span class="bu">sum</span> of many things</span>
<span id="cb37-2"><a href="syntax-and-grammar.html#cb37-2" aria-hidden="true" tabindex="-1"></a>    local temp <span class="op">=</span> v1 <span class="op">+</span> v2 <span class="op">+</span> v3 <span class="op">+</span> v4 <span class="op">+</span> v5 <span class="op">+</span> v6 <span class="op">+</span> v7 <span class="op">+</span> v8 <span class="op">+</span> v9 <span class="op">+</span> v10</span>
<span id="cb37-3"><a href="syntax-and-grammar.html#cb37-3" aria-hidden="true" tabindex="-1"></a>    long_sum <span class="op">=</span> temp <span class="op">+</span> v11 <span class="op">+</span> v12 <span class="op">+</span> v13 <span class="op">+</span> v14 <span class="op">+</span> v15</span>
<span id="cb37-4"><a href="syntax-and-grammar.html#cb37-4" aria-hidden="true" tabindex="-1"></a>end</span></code></pre></div>
</div>
<div id="variable-types" class="section level3" number="5.11.2">
<h3>
<span class="header-section-number">5.11.2</span> Variable Types<a class="anchor" aria-label="anchor" href="#variable-types"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb38"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb38-1"><a href="syntax-and-grammar.html#cb38-1" aria-hidden="true" tabindex="-1"></a>model new</span>
<span id="cb38-2"><a href="syntax-and-grammar.html#cb38-2" aria-hidden="true" tabindex="-1"></a>fish define types</span>
<span id="cb38-3"><a href="syntax-and-grammar.html#cb38-3" aria-hidden="true" tabindex="-1"></a>    v1 <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb38-4"><a href="syntax-and-grammar.html#cb38-4" aria-hidden="true" tabindex="-1"></a>    v2 <span class="op">=</span> <span class="fl">3.4</span></span>
<span id="cb38-5"><a href="syntax-and-grammar.html#cb38-5" aria-hidden="true" tabindex="-1"></a>    v3 <span class="op">=</span> <span class="st">'Have a nice day'</span></span>
<span id="cb38-6"><a href="syntax-and-grammar.html#cb38-6" aria-hidden="true" tabindex="-1"></a>    v4 <span class="op">=</span> v1 <span class="op">*</span> v2</span>
<span id="cb38-7"><a href="syntax-and-grammar.html#cb38-7" aria-hidden="true" tabindex="-1"></a>    v5 <span class="op">=</span> v3 <span class="op">+</span> <span class="st">', old chap'</span></span>
<span id="cb38-8"><a href="syntax-and-grammar.html#cb38-8" aria-hidden="true" tabindex="-1"></a>    v6 <span class="op">=</span> vector(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>)</span>
<span id="cb38-9"><a href="syntax-and-grammar.html#cb38-9" aria-hidden="true" tabindex="-1"></a>    v7 <span class="op">=</span> matrix(vector(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>))</span>
<span id="cb38-10"><a href="syntax-and-grammar.html#cb38-10" aria-hidden="true" tabindex="-1"></a>    v8 <span class="op">=</span> true</span>
<span id="cb38-11"><a href="syntax-and-grammar.html#cb38-11" aria-hidden="true" tabindex="-1"></a>end</span>
<span id="cb38-12"><a href="syntax-and-grammar.html#cb38-12" aria-hidden="true" tabindex="-1"></a><span class="at">@types</span></span>
<span id="cb38-13"><a href="syntax-and-grammar.html#cb38-13" aria-hidden="true" tabindex="-1"></a>fish <span class="bu">list</span></span></code></pre></div>
<p>The resulting screen display looks like this:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb39-1"><a href="syntax-and-grammar.html#cb39-1" aria-hidden="true" tabindex="-1"></a>           Name    Value</span>
<span id="cb39-2"><a href="syntax-and-grammar.html#cb39-2" aria-hidden="true" tabindex="-1"></a>           <span class="op">-------</span> <span class="op">--------------------</span></span>
<span id="cb39-3"><a href="syntax-and-grammar.html#cb39-3" aria-hidden="true" tabindex="-1"></a>(function) types <span class="dv">0</span> (integer)</span>
<span id="cb39-4"><a href="syntax-and-grammar.html#cb39-4" aria-hidden="true" tabindex="-1"></a>           v1    <span class="dv">2</span> (integer)</span>
<span id="cb39-5"><a href="syntax-and-grammar.html#cb39-5" aria-hidden="true" tabindex="-1"></a>           v2    <span class="fl">3.400000000000000e+00</span> (real)</span>
<span id="cb39-6"><a href="syntax-and-grammar.html#cb39-6" aria-hidden="true" tabindex="-1"></a>           v3    <span class="st">'Have a nice day'</span> (string)</span>
<span id="cb39-7"><a href="syntax-and-grammar.html#cb39-7" aria-hidden="true" tabindex="-1"></a>           v4    <span class="fl">6.800000000000000e+00</span> (real)</span>
<span id="cb39-8"><a href="syntax-and-grammar.html#cb39-8" aria-hidden="true" tabindex="-1"></a>           v5    <span class="st">'Have a nice day, old chap'</span> (string)</span>
<span id="cb39-9"><a href="syntax-and-grammar.html#cb39-9" aria-hidden="true" tabindex="-1"></a>           v6    (<span class="fl">1.000000000000000e+00</span>,<span class="fl">2.000000000000000e+00</span>,</span>
<span id="cb39-10"><a href="syntax-and-grammar.html#cb39-10" aria-hidden="true" tabindex="-1"></a>                  <span class="fl">3.000000000000000e+00</span>) (vector3)                [<span class="op">**</span>]</span>
<span id="cb39-11"><a href="syntax-and-grammar.html#cb39-11" aria-hidden="true" tabindex="-1"></a>           v7    <span class="dv">3</span> x <span class="dv">1</span> (matrix)</span>
<span id="cb39-12"><a href="syntax-and-grammar.html#cb39-12" aria-hidden="true" tabindex="-1"></a>           v8    true (boolean)</span></code></pre></div>
</div>
<div id="traditional-for-loop-in-fish" class="section level3" number="5.11.3">
<h3>
<span class="header-section-number">5.11.3</span> Traditional for loop in FISH<a class="anchor" aria-label="anchor" href="#traditional-for-loop-in-fish"><i class="fas fa-link"></i></a>
</h3>
<p>standard for loop is also available in FISH to provide for additionalloop control.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb40-1"><a href="syntax-and-grammar.html#cb40-1" aria-hidden="true" tabindex="-1"></a>fish define xxx</span>
<span id="cb40-2"><a href="syntax-and-grammar.html#cb40-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">sum</span>  <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb40-3"><a href="syntax-and-grammar.html#cb40-3" aria-hidden="true" tabindex="-1"></a>    prod <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb40-4"><a href="syntax-and-grammar.html#cb40-4" aria-hidden="true" tabindex="-1"></a>    loop <span class="cf">for</span> (n <span class="op">=</span> <span class="dv">1</span>, n <span class="op">&lt;=</span> <span class="dv">10</span>, n <span class="op">=</span> n <span class="op">+</span> <span class="dv">1</span>)</span>
<span id="cb40-5"><a href="syntax-and-grammar.html#cb40-5" aria-hidden="true" tabindex="-1"></a>        <span class="bu">sum</span>  <span class="op">=</span> <span class="bu">sum</span>  <span class="op">+</span> n</span>
<span id="cb40-6"><a href="syntax-and-grammar.html#cb40-6" aria-hidden="true" tabindex="-1"></a>        prod <span class="op">=</span> prod <span class="op">*</span> n</span>
<span id="cb40-7"><a href="syntax-and-grammar.html#cb40-7" aria-hidden="true" tabindex="-1"></a>    end_loop</span>
<span id="cb40-8"><a href="syntax-and-grammar.html#cb40-8" aria-hidden="true" tabindex="-1"></a>    io.out(<span class="st">'The sum is '</span> <span class="op">+</span> string(<span class="bu">sum</span>) <span class="op">+</span> ... </span>
<span id="cb40-9"><a href="syntax-and-grammar.html#cb40-9" aria-hidden="true" tabindex="-1"></a>           <span class="st">' and the product is '</span> <span class="op">+</span> string(prod))</span>
<span id="cb40-10"><a href="syntax-and-grammar.html#cb40-10" aria-hidden="true" tabindex="-1"></a>end</span>
<span id="cb40-11"><a href="syntax-and-grammar.html#cb40-11" aria-hidden="true" tabindex="-1"></a><span class="at">@xxx</span></span></code></pre></div>
<div id="controlled-loop" class="section level4" number="5.11.3.1">
<h4>
<span class="header-section-number">5.11.3.1</span> Controlled loop<a class="anchor" aria-label="anchor" href="#controlled-loop"><i class="fas fa-link"></i></a>
</h4>
<div class="sourceCode" id="cb41"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb41-1"><a href="syntax-and-grammar.html#cb41-1" aria-hidden="true" tabindex="-1"></a>model new</span>
<span id="cb41-2"><a href="syntax-and-grammar.html#cb41-2" aria-hidden="true" tabindex="-1"></a>fish define xxx</span>
<span id="cb41-3"><a href="syntax-and-grammar.html#cb41-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">sum</span>  <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb41-4"><a href="syntax-and-grammar.html#cb41-4" aria-hidden="true" tabindex="-1"></a>    prod <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb41-5"><a href="syntax-and-grammar.html#cb41-5" aria-hidden="true" tabindex="-1"></a>    loop n (<span class="dv">1</span>,<span class="dv">10</span>)</span>
<span id="cb41-6"><a href="syntax-and-grammar.html#cb41-6" aria-hidden="true" tabindex="-1"></a>        <span class="bu">sum</span>  <span class="op">=</span> <span class="bu">sum</span>  <span class="op">+</span> n</span>
<span id="cb41-7"><a href="syntax-and-grammar.html#cb41-7" aria-hidden="true" tabindex="-1"></a>        prod <span class="op">=</span> prod <span class="op">*</span> n</span>
<span id="cb41-8"><a href="syntax-and-grammar.html#cb41-8" aria-hidden="true" tabindex="-1"></a>    end_loop</span>
<span id="cb41-9"><a href="syntax-and-grammar.html#cb41-9" aria-hidden="true" tabindex="-1"></a>    io.out(<span class="st">'The sum is '</span> <span class="op">+</span> string(<span class="bu">sum</span>) <span class="op">+</span>  ...</span>
<span id="cb41-10"><a href="syntax-and-grammar.html#cb41-10" aria-hidden="true" tabindex="-1"></a>           <span class="st">' and the product is '</span> <span class="op">+</span> string(prod))</span>
<span id="cb41-11"><a href="syntax-and-grammar.html#cb41-11" aria-hidden="true" tabindex="-1"></a>end</span>
<span id="cb41-12"><a href="syntax-and-grammar.html#cb41-12" aria-hidden="true" tabindex="-1"></a><span class="at">@xxx</span></span></code></pre></div>
<p>In this case, the loop variable n is given successive values from 1 to 10, and the statements inside the loop (between the loop and endloop statements) are executed for each value. As mentioned, variable names or an arithmetic expression could be substituted for the numbers 1 or 10. Note that the exit statement can be used to break out of a FISH loop and the continue statement can be used to skip the remaining instructions in the loop, moving to the next sequence of the loop.</p>
<p>It is important to note that this formulation of looping is different from a for loop in most high-level programming languages. For instance, one cannot easily control the ending condition (i.e., loop from 1 to 10 excluding 10) or the incrementing mechanism (i.e., loop from 1 to 10 by twos or loop backward). A standard for loop is also available in FISH to provide for additional loop control.</p>
</div>
</div>
<div id="if-else-endif-construct" class="section level3" number="5.11.4">
<h3>
<span class="header-section-number">5.11.4</span> if else endif construct<a class="anchor" aria-label="anchor" href="#if-else-endif-construct"><i class="fas fa-link"></i></a>
</h3>
<p>These statements allow conditional execution of FISH function segments; else and then are optional. The item test consists of one of the following symbols or symbol pairs:<br></p>
<p>= # &gt; &lt; &gt;= &lt;=<br></p>
<p>The displayed value of abc in this example depends on the argument provided to abc when it is executed. You should experiment with different test symbols (e.g., replace &gt; with &lt;).</p>
<p>Until now, our FISH functions have been invoked from FLAC3D, either by using the sqaure brackets [] of inline FISH, by giving the function name prepended with the the @ character, or by using the fish list command. It is also possible to do the reverse, to give FLAC3D commands from within FISH functions. Most valid FLAC3D commands can be embedded between the following FISH statements:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb42-1"><a href="syntax-and-grammar.html#cb42-1" aria-hidden="true" tabindex="-1"></a>model new</span>
<span id="cb42-2"><a href="syntax-and-grammar.html#cb42-2" aria-hidden="true" tabindex="-1"></a>fish define abc(xx)</span>
<span id="cb42-3"><a href="syntax-and-grammar.html#cb42-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> xx <span class="op">&gt;</span> <span class="dv">0</span> then </span>
<span id="cb42-4"><a href="syntax-and-grammar.html#cb42-4" aria-hidden="true" tabindex="-1"></a>        abc <span class="op">=</span> <span class="dv">33</span></span>
<span id="cb42-5"><a href="syntax-and-grammar.html#cb42-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span></span>
<span id="cb42-6"><a href="syntax-and-grammar.html#cb42-6" aria-hidden="true" tabindex="-1"></a>        abc <span class="op">=</span> <span class="dv">11</span></span>
<span id="cb42-7"><a href="syntax-and-grammar.html#cb42-7" aria-hidden="true" tabindex="-1"></a>    end_if</span>
<span id="cb42-8"><a href="syntax-and-grammar.html#cb42-8" aria-hidden="true" tabindex="-1"></a>end</span>
<span id="cb42-9"><a href="syntax-and-grammar.html#cb42-9" aria-hidden="true" tabindex="-1"></a>[abc(<span class="dv">1</span>)]</span>
<span id="cb42-10"><a href="syntax-and-grammar.html#cb42-10" aria-hidden="true" tabindex="-1"></a>[abc(<span class="op">-</span><span class="dv">1</span>)]</span></code></pre></div>
</div>
<div id="arrays-and-maps" class="section level3" number="5.11.5">
<h3>
<span class="header-section-number">5.11.5</span> Arrays and Maps<a class="anchor" aria-label="anchor" href="#arrays-and-maps"><i class="fas fa-link"></i></a>
</h3>
<p>It is often the case that one would like to store a list of objects that they will loop over in the future. These may be computed values from zones, for instance, or specific gridpoint pointers themselves. FISH has two containers to use in these circumstances, termed arrays and maps.</p>
<p>An array holds a list of FISH variables of any type that can be looped over or accessed by the integer index of the element of the array. Arrays can be multidimensional and do not resize dynamically. The simple example below shows how one can create an array of integers and then sum the values.</p>
<div id="array-example" class="section level4" number="5.11.5.1">
<h4>
<span class="header-section-number">5.11.5.1</span> Array example<a class="anchor" aria-label="anchor" href="#array-example"><i class="fas fa-link"></i></a>
</h4>
<div class="sourceCode" id="cb43"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb43-1"><a href="syntax-and-grammar.html#cb43-1" aria-hidden="true" tabindex="-1"></a>model new</span>
<span id="cb43-2"><a href="syntax-and-grammar.html#cb43-2" aria-hidden="true" tabindex="-1"></a>fish define array_operation</span>
<span id="cb43-3"><a href="syntax-and-grammar.html#cb43-3" aria-hidden="true" tabindex="-1"></a>    <span class="op">;</span>create <span class="kw">and</span> populate an array <span class="cf">with</span> products of <span class="dv">2</span></span>
<span id="cb43-4"><a href="syntax-and-grammar.html#cb43-4" aria-hidden="true" tabindex="-1"></a>    arr <span class="op">=</span> array.create(<span class="dv">10</span>)</span>
<span id="cb43-5"><a href="syntax-and-grammar.html#cb43-5" aria-hidden="true" tabindex="-1"></a>    loop local n(<span class="dv">1</span>,<span class="dv">10</span>)</span>
<span id="cb43-6"><a href="syntax-and-grammar.html#cb43-6" aria-hidden="true" tabindex="-1"></a>        arr[n] <span class="op">=</span> <span class="dv">2</span><span class="op">*</span>n</span>
<span id="cb43-7"><a href="syntax-and-grammar.html#cb43-7" aria-hidden="true" tabindex="-1"></a>    end_loop</span>
<span id="cb43-8"><a href="syntax-and-grammar.html#cb43-8" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb43-9"><a href="syntax-and-grammar.html#cb43-9" aria-hidden="true" tabindex="-1"></a>    <span class="op">;</span>compute the <span class="bu">sum</span> <span class="kw">and</span> product of elements <span class="kw">in</span> the array</span>
<span id="cb43-10"><a href="syntax-and-grammar.html#cb43-10" aria-hidden="true" tabindex="-1"></a>    <span class="bu">sum</span> <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb43-11"><a href="syntax-and-grammar.html#cb43-11" aria-hidden="true" tabindex="-1"></a>    prod <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb43-12"><a href="syntax-and-grammar.html#cb43-12" aria-hidden="true" tabindex="-1"></a>    local i <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb43-13"><a href="syntax-and-grammar.html#cb43-13" aria-hidden="true" tabindex="-1"></a>    loop <span class="cf">while</span> (i <span class="op">&lt;=</span> array.size(arr,<span class="dv">1</span>))</span>
<span id="cb43-14"><a href="syntax-and-grammar.html#cb43-14" aria-hidden="true" tabindex="-1"></a>        <span class="bu">sum</span> <span class="op">=</span> <span class="bu">sum</span> <span class="op">+</span> arr[i]</span>
<span id="cb43-15"><a href="syntax-and-grammar.html#cb43-15" aria-hidden="true" tabindex="-1"></a>        prod <span class="op">=</span> prod <span class="op">*</span> arr[i]</span>
<span id="cb43-16"><a href="syntax-and-grammar.html#cb43-16" aria-hidden="true" tabindex="-1"></a>        i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb43-17"><a href="syntax-and-grammar.html#cb43-17" aria-hidden="true" tabindex="-1"></a>    end_loop</span>
<span id="cb43-18"><a href="syntax-and-grammar.html#cb43-18" aria-hidden="true" tabindex="-1"></a>    io.out(<span class="st">'The sum is '</span> <span class="op">+</span> string(<span class="bu">sum</span>) <span class="op">+</span> ...</span>
<span id="cb43-19"><a href="syntax-and-grammar.html#cb43-19" aria-hidden="true" tabindex="-1"></a>           <span class="st">' and the product is '</span> <span class="op">+</span> string(prod))</span>
<span id="cb43-20"><a href="syntax-and-grammar.html#cb43-20" aria-hidden="true" tabindex="-1"></a>end</span>
<span id="cb43-21"><a href="syntax-and-grammar.html#cb43-21" aria-hidden="true" tabindex="-1"></a><span class="at">@array_operation</span></span></code></pre></div>
<p>In this example, an array is created and filled with numbers. The loop while construct is used to loop over the array entries and the sum and product are computed and output.</p>
<p>A map, on the other hand, is an associative container, meaning that one can access the members of a map by an integer or string used to insert a value in the map. Maps can dynamically be resized and added to one another (appending maps together), and are the preferred constructs for storing lists of FISH variables for later access.</p>
</div>
<div id="map-example" class="section level4" number="5.11.5.2">
<h4>
<span class="header-section-number">5.11.5.2</span> Map example<a class="anchor" aria-label="anchor" href="#map-example"><i class="fas fa-link"></i></a>
</h4>
<div class="sourceCode" id="cb44"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb44-1"><a href="syntax-and-grammar.html#cb44-1" aria-hidden="true" tabindex="-1"></a>model new</span>
<span id="cb44-2"><a href="syntax-and-grammar.html#cb44-2" aria-hidden="true" tabindex="-1"></a>fish define map_operation</span>
<span id="cb44-3"><a href="syntax-and-grammar.html#cb44-3" aria-hidden="true" tabindex="-1"></a>    <span class="op">;</span>create <span class="kw">and</span> populate a <span class="bu">map</span> <span class="cf">with</span> products of <span class="dv">2</span></span>
<span id="cb44-4"><a href="syntax-and-grammar.html#cb44-4" aria-hidden="true" tabindex="-1"></a>    my_map <span class="op">=</span> <span class="bu">map</span>(<span class="dv">1</span>,<span class="dv">2</span>)</span>
<span id="cb44-5"><a href="syntax-and-grammar.html#cb44-5" aria-hidden="true" tabindex="-1"></a>    loop local n(<span class="dv">2</span>,<span class="dv">10</span>)</span>
<span id="cb44-6"><a href="syntax-and-grammar.html#cb44-6" aria-hidden="true" tabindex="-1"></a>        <span class="bu">map</span>.add(my_map,n,<span class="dv">2</span><span class="op">*</span>n)</span>
<span id="cb44-7"><a href="syntax-and-grammar.html#cb44-7" aria-hidden="true" tabindex="-1"></a>    end_loop</span>
<span id="cb44-8"><a href="syntax-and-grammar.html#cb44-8" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb44-9"><a href="syntax-and-grammar.html#cb44-9" aria-hidden="true" tabindex="-1"></a>    <span class="op">;</span>compute the <span class="bu">sum</span> <span class="kw">and</span> product of elements <span class="kw">in</span> the <span class="bu">map</span></span>
<span id="cb44-10"><a href="syntax-and-grammar.html#cb44-10" aria-hidden="true" tabindex="-1"></a>    <span class="bu">sum</span> <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb44-11"><a href="syntax-and-grammar.html#cb44-11" aria-hidden="true" tabindex="-1"></a>    prod <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb44-12"><a href="syntax-and-grammar.html#cb44-12" aria-hidden="true" tabindex="-1"></a>    loop foreach n my_map</span>
<span id="cb44-13"><a href="syntax-and-grammar.html#cb44-13" aria-hidden="true" tabindex="-1"></a>        <span class="bu">sum</span> <span class="op">=</span> <span class="bu">sum</span> <span class="op">+</span> n</span>
<span id="cb44-14"><a href="syntax-and-grammar.html#cb44-14" aria-hidden="true" tabindex="-1"></a>        prod <span class="op">=</span> prod <span class="op">*</span> n</span>
<span id="cb44-15"><a href="syntax-and-grammar.html#cb44-15" aria-hidden="true" tabindex="-1"></a>    end_loop</span>
<span id="cb44-16"><a href="syntax-and-grammar.html#cb44-16" aria-hidden="true" tabindex="-1"></a>    io.out(<span class="st">'The sum is '</span> <span class="op">+</span> string(<span class="bu">sum</span>) <span class="op">+</span> ...</span>
<span id="cb44-17"><a href="syntax-and-grammar.html#cb44-17" aria-hidden="true" tabindex="-1"></a>           <span class="st">' and the product is '</span> <span class="op">+</span> string(prod))</span>
<span id="cb44-18"><a href="syntax-and-grammar.html#cb44-18" aria-hidden="true" tabindex="-1"></a>end</span>
<span id="cb44-19"><a href="syntax-and-grammar.html#cb44-19" aria-hidden="true" tabindex="-1"></a><span class="at">@map_operation</span></span></code></pre></div>
<p>Unlike with arrays, maps can be looped through using the loop foreach construct. In this case, n is the value held in each map entry, not the integer name of the object in the map. Likewise, instead of using integers to insert objects into the map, one could use strings such as first, second, etc. This allows one to easily and efficiently store and access FISH variables by a user-defined name.</p>
</div>
</div>
<div id="fish-function" class="section level3" number="5.11.6">
<h3>
<span class="header-section-number">5.11.6</span> Fish Function<a class="anchor" aria-label="anchor" href="#fish-function"><i class="fas fa-link"></i></a>
</h3>
<p>FISH functions to calculate bulk and shear moduli</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb45-1"><a href="syntax-and-grammar.html#cb45-1" aria-hidden="true" tabindex="-1"></a>model new</span>
<span id="cb45-2"><a href="syntax-and-grammar.html#cb45-2" aria-hidden="true" tabindex="-1"></a>fish define derive(y_mod,p_ratio)</span>
<span id="cb45-3"><a href="syntax-and-grammar.html#cb45-3" aria-hidden="true" tabindex="-1"></a>    s_mod <span class="op">=</span> y_mod <span class="op">/</span> (<span class="fl">2.0</span> <span class="op">*</span> (<span class="fl">1.0</span> <span class="op">+</span> p_ratio))</span>
<span id="cb45-4"><a href="syntax-and-grammar.html#cb45-4" aria-hidden="true" tabindex="-1"></a>    b_mod <span class="op">=</span> y_mod <span class="op">/</span> (<span class="fl">3.0</span> <span class="op">*</span> (<span class="fl">1.0</span> <span class="op">-</span> <span class="fl">2.0</span> <span class="op">*</span> p_ratio))</span>
<span id="cb45-5"><a href="syntax-and-grammar.html#cb45-5" aria-hidden="true" tabindex="-1"></a>end</span>
<span id="cb45-6"><a href="syntax-and-grammar.html#cb45-6" aria-hidden="true" tabindex="-1"></a>[derive(<span class="fl">5e8</span>,<span class="fl">0.25</span>)]</span>
<span id="cb45-7"><a href="syntax-and-grammar.html#cb45-7" aria-hidden="true" tabindex="-1"></a>[b_mod] </span>
<span id="cb45-8"><a href="syntax-and-grammar.html#cb45-8" aria-hidden="true" tabindex="-1"></a>[s_mod]</span></code></pre></div>
<!--------------------------------------------------->
<!--------------------------------------------------->
<!--------------------------------------------------->
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="grid.html"><span class="header-section-number">4</span> Grid</a></div>
<div class="next"><a href="code-block.html"><span class="header-section-number">6</span> Code Block</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#syntax-and-grammar"><span class="header-section-number">5</span> Syntax and Grammar</a></li>
<li><a class="nav-link" href="#introduction"><span class="header-section-number">5.1</span> Introduction</a></li>
<li><a class="nav-link" href="#zones-3"><span class="header-section-number">5.2</span> Zones</a></li>
<li><a class="nav-link" href="#properties-2"><span class="header-section-number">5.3</span> Properties</a></li>
<li><a class="nav-link" href="#gridpoints"><span class="header-section-number">5.4</span> Gridpoints</a></li>
<li><a class="nav-link" href="#structural-elements"><span class="header-section-number">5.5</span> Structural Elements</a></li>
<li><a class="nav-link" href="#extra-variables"><span class="header-section-number">5.6</span> Extra Variables</a></li>
<li><a class="nav-link" href="#groups-and-b.c."><span class="header-section-number">5.7</span> Groups and B.C.</a></li>
<li><a class="nav-link" href="#parameteric-studies"><span class="header-section-number">5.8</span> Parameteric Studies</a></li>
<li>
<a class="nav-link" href="#setting-fish-variables"><span class="header-section-number">5.9</span> Setting FISH variables</a><ul class="nav navbar-nav"><li><a class="nav-link" href="#issuing-command"><span class="header-section-number">5.9.1</span> Issuing Command</a></li></ul>
</li>
<li><a class="nav-link" href="#string"><span class="header-section-number">5.10</span> String</a></li>
<li>
<a class="nav-link" href="#fish-syntax"><span class="header-section-number">5.11</span> Fish Syntax</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#use-of"><span class="header-section-number">5.11.1</span> Use of …</a></li>
<li><a class="nav-link" href="#variable-types"><span class="header-section-number">5.11.2</span> Variable Types</a></li>
<li><a class="nav-link" href="#traditional-for-loop-in-fish"><span class="header-section-number">5.11.3</span> Traditional for loop in FISH</a></li>
<li><a class="nav-link" href="#if-else-endif-construct"><span class="header-section-number">5.11.4</span> if else endif construct</a></li>
<li><a class="nav-link" href="#arrays-and-maps"><span class="header-section-number">5.11.5</span> Arrays and Maps</a></li>
<li><a class="nav-link" href="#fish-function"><span class="header-section-number">5.11.6</span> Fish Function</a></li>
</ul>
</li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/ulyngs/oxforddown/blob/master/01-how-to-use.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/ulyngs/oxforddown/edit/master/01-how-to-use.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong><p><code>FLAC3D</code> Gitbook</p></strong>" was written by Kyeong Sun Kim. </p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
