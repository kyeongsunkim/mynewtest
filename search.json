[{"path":"index.html","id":"welcome","chapter":"Welcome","heading":"Welcome","text":"bs4 output mytemplate R Markdown, using bookdown R package.\npurpose gitbook extend capability organizing codes learnt FLAC3D manual.\nPDF file, click cover image.\nWord file, click .\nGitbook file, email kyeongsunkim@snu.ac.kr.Kyeong Sun Kim\nSeptember 2021\nSeoul National University","code":""},{"path":"kaist-model.html","id":"kaist-model","chapter":"1 KAIST Model","heading":"1 KAIST Model","text":"","code":""},{"path":"kaist-model.html","id":"initial-configuration","chapter":"1 KAIST Model","heading":"1.1 Initial Configuration","text":"","code":"import itasca as it\nimport numpy as np\nnp.set_printoptions(threshold=20)\nit.command(\"python-reset-state false\")\nfrom itasca import zonearray as za\nfrom itasca import gridpointarray as gpa"},{"path":"kaist-model.html","id":"zones","chapter":"1 KAIST Model","heading":"1.2 Zones","text":"","code":"model new\nzone create radial-cylinder point 0 (0,0,0) ...\n                            point 1 (40,0,0) ...\n                            point 2 (0,10,0) ...\n                            point 3 (0,0,40) ...\n                            point 4 (40,10,0) ...\n                            point 5 (0,10,40) ...\n                            point 6 (40,0,40) ...\n                            point 7 (40,10,40) ...\n                            point 8 (1,0,0) ...\n                            point 9 (0,0,1) ...\n                            point 10 (1,10,0) ...\n                            point 11 (0,10,1) ...\n                            size 10 20 26 40 ...\n                            rat 1 1 1 1.5 ...\n                            fill group \"shaft\"\n\nzone group \"plate\" range position-x 0 3.2 position-y 8.5 10 position-z 0 3.2"},{"path":"kaist-model.html","id":"group","chapter":"1 KAIST Model","heading":"1.3 Group","text":"","code":"zone group \"plate\" range position-x 0 3.2 position-y 8.5 10 position-z 0 3.2"},{"path":"kaist-model.html","id":"constitutive-model","chapter":"1 KAIST Model","heading":"1.4 Constitutive Model","text":"Besides standard looping depicted , one can easily loop sets model objects (.e., zones, gridpoints, structural element nodes, etc.) using loop foreach construct. case, container objects must given FISH intrinsic zone.list. practical use loop foreach construct install nonlinear initial distribution elastic moduli FLAC3D grid. Suppose Young’s modulus site given equation:\\[ E = E_0 + c \\sqrt{z}  \\]\nz depth surface, c E∘ constants. write FISH function install appropriate values bulk shear modulus grid, example:, can verify correct operation function printing plotting shear bulk moduli.function install, loop takes place zones global list zones. FISH statement loop foreach variation loop statement sets pnt zone zone.list. Inside loop, z-coordinate zone centroid used calculate Young’s modulus, given equation . assume datum (ground surface reference point) z = 0. variables zone.pos.z(pnt) zone.prop(pnt, ‘young’) zone intrinsics. (Recall talked gridpoint intrinsic gp.force.unbal earlier.) , set properties directly within FISH function, rather zone property command earlier example.","code":"model new\nzone create brick point 0 (0,0,0) point 1 (-10,0,0) ...\n                  point 2 (0,10,0) point 3 (0,0,-10)\nzone cmodel assign elastic\nfish define install(y_zero,cc)\n    loop foreach pnt zone.list\n        z_depth = -zone.pos.z(pnt)\n        y_mod = y_zero + cc * math.sqrt(z_depth)\n        zone.prop(pnt,'young') = y_mod\n    end_loop\nend\n@install(1e7,1e8)\nzone property poisson 0.25\nplot item create zone contour property name 'young'#Constitutive model and properties for soil\nzone cmodel assign strain-softening range group \"Radial Cylinder1\"\nzone property density 2500 bulk 2e8 shear 1e8 range group \"Radial Cylinder1\"\nzone property cohesion 2e6 friction 45 tension 2e5 dilation 10 range group \"Radial Cylinder1\"\nzone property table-friction 'fri' table-cohesion 'coh' table-dilation 'dil' range group \"Radial Cylinder1\"\ntable 'fri' add (0, 45) (.05, 42) (.1, 40) (1, 40)\ntable 'coh' add (0,2e6) (.05,1e6) (.1,5e5) (1,5e5) \ntable 'dil' add (0, 10) (.05,  3) (.1,  0) \n#Constitutive modeland properties for shaft and plate\nzone cmodel assign elastic range group 'shaft'\nzone property bulk 13.9e9  shear 10.4e9  range group 'shaft'\nzone cmodel assign elastic range group 'plate'\nzone property bulk 13.9e9  shear 10.4e9  range group 'plate'"},{"path":"kaist-model.html","id":"soil-structure-interface","chapter":"1 KAIST Model","heading":"1.5 Soil-Structure Interface","text":"","code":"# Name intersections of things named in the two extruder views\nzone group 'clay' range group 'clay-c' or 'clay-s' or 'wetclay-s'\nzone group 'pile' range group 'pile-c' group 'pile-s' or 'remove-s'\nzone group 'remove' range group 'remove-s' group 'pile-c' not ; \nzone face group 'wall' internal range group 'wall-c' group 'pile'\nzone face group 'base' internal range group 'base-s' group 'pile'\nzone face skin ; Name far field boundaries\n# Delete the area marked for removal\nzone delete range group 'remove'\n;\n# setup interfaces - separate using ZONE SEPARATE \n# all at once so common nodes are separated\nzone separate by-face new-side group 'iwall' slot 'int' ...\n     range group 'wall' or 'base'\n# Want two different interfaces for proper normal direction at corner\nzone interface 'side' create by-face range group 'wall' and 'iwall'\nzone interface 'base' create by-face range group 'base' and 'iwall'\n# Save initial geometric state\nmodel save 'geometry'"},{"path":"kaist-model.html","id":"boundary-conditions","chapter":"1 KAIST Model","heading":"1.6 Boundary Conditions","text":"","code":""},{"path":"kaist-model.html","id":"initial-equilibrium","chapter":"1 KAIST Model","heading":"1.7 Initial Equilibrium","text":"","code":""},{"path":"kaist-model.html","id":"alterations","chapter":"1 KAIST Model","heading":"1.8 Alterations","text":"","code":""},{"path":"kaist-model.html","id":"results","chapter":"1 KAIST Model","heading":"1.9 Results","text":"","code":""},{"path":"axial-concrete-pile.html","id":"axial-concrete-pile","chapter":"2 Axial Concrete Pile","heading":"2 Axial Concrete Pile","text":"","code":""},{"path":"axial-concrete-pile.html","id":"problem-description","chapter":"2 Axial Concrete Pile","heading":"2.1 Problem Description","text":"","code":""},{"path":"axial-concrete-pile.html","id":"problem-statement","chapter":"2 Axial Concrete Pile","heading":"2.1.1 Problem Statement","text":"pile subjected axial load 100 kN,\ntop pile moved horizontally displacement 4 cm.\ngoal determine relation axial loading ultimate bearing capacity.\n, lateral load-deflection curve calculated.origin top pile, z upward.z=0: free surfacez=-8: fixed z-eirectionx=+8, -8, y = 8: rollerskin friction modeled placing interface\npile concrete wall clay.\n, fric angle 20 c=30kPa assumed.toe interface placed pile tip clay\nnote: Zone faces separated previous command gridpoints common separated well.note: include Figure grid (geometry)","code":""},{"path":"axial-concrete-pile.html","id":"main-parameters","chapter":"2 Axial Concrete Pile","heading":"2.1.2 Main Parameters","text":"Diameter = 0.6 m\nLength = 5\nClay\nGWT = 5.5m","code":""},{"path":"axial-concrete-pile.html","id":"modeling-procedure","chapter":"2 Axial Concrete Pile","heading":"2.2 Modeling Procedure","text":"equil. stress state gravity load install.\n1-1) water table created z=5.5\n1-2) wet density clay assigned water table.equil. stress state installation.\n2-1) change properties pile zones \nrepresenting clay representing concrete.\n2-2) vertical equil. stress distribution equil. state shown innote: include Figure contours vertical stress ini state incld. pile weightapply vertical velocity top pile\n“ramp” = boundary condition increased linearlynote: critical timestep controlled high stiffness concrete\nvelocity sudden, inertial effects dominate renders difficulty identification steady state response system\ntable “ramp” used apply velocity pile top gridpoints.note: FISH FUNCTION vert_load calculates axial stress top pile stores value history\nefficiency, gridpoints cap surface stored symbol “cap” mapnote: include plot axial stress vs axial displ. pile toe. ramp = (0,5e-8), step number = 30000note: combined damping used remove kinetic energy prescribed loading condition. mass-adjustment process depends velocity sign-changes..note: FISH FUNCTION tot_reac monitors soil reaction along pile func lateral displ. tot_reac creates tables soil reaction (p) vs. lateral displ (y) diff. locations along pile generate p-y curve.note: include Figure p-y curve 11 equidistant points along pile","code":""},{"path":"axial-concrete-pile.html","id":"zones-1","chapter":"2 Axial Concrete Pile","heading":"2.3 Zones","text":"","code":"model new\nmodel title 'Axial and lateral loading of a concrete pile'\n; create grid interactively from the extruder tool, \n; exported to geometry.f3dat from State Record pane.\ncall 'geometry' suppress\nzone generate from-extruder\n; Reflect the grid to get a 1/2 space instead of a 1/4 space\nzone reflect dip-direction 270 dip 90"},{"path":"axial-concrete-pile.html","id":"groups","chapter":"2 Axial Concrete Pile","heading":"2.4 Groups","text":"","code":"; Name intersections of things named in the two extruder views\nzone group 'clay' range group 'clay-c' or 'clay-s' or 'wetclay-s'\nzone group 'pile' range group 'pile-c' group 'pile-s' or 'remove-s'\nzone group 'remove' range group 'remove-s' group 'pile-c' not ; \nzone face group 'wall' internal range group 'wall-c' group 'pile'\nzone face group 'base' internal range group 'base-s' group 'pile'\nzone face skin ; Name far field boundaries\n; Delete the area marked for removal\nzone delete range group 'remove'\n;\n; setup interfaces\n; separate using zone separate\n; all at once so common nodes are separated\nzone separate by-face new-side group 'iwall' slot 'int' ...\n     range group 'wall' or 'base'\n; Want two different interfaces for proper normal direction at corner\nzone interface 'side' create by-face range group 'wall' and 'iwall'\nzone interface 'base' create by-face range group 'base' and 'iwall'\n; Save initial geometric state\nmodel save 'geometry'"},{"path":"axial-concrete-pile.html","id":"properties","chapter":"2 Axial Concrete Pile","heading":"2.5 Properties","text":"","code":"; Initialize gravity, pore-pressures, density, and stres state\nmodel gravity 10\n; water table information\nzone water density 1000\nzone water plane origin (0,0,-5.5) normal (0,0,-1)\nzone initialize density 1230\nzone initialize density 1550 range group 'wetclay-s' ; Wet density\n; assign properties to the soil and interfaces - temporarily remove pile cap\nzone cmodel assign mohr-coulomb ...\n     range group 'clay'\nzone property bulk 8.333e7  shear 3.846e7  cohesion 30000 fric 0 ...\n     range group 'clay'\nzone cmodel assign elastic                 range group 'pile'\nzone property bulk 8.333e7  shear 3.846e7  range group 'pile'\nzone cmodel assign null                    range group 'remove-s'\nzone interface 'side' node property stiffness-normal 1e8 ...\n                           stiffness-shear 1e8 friction 20 cohesion 30000\nzone interface 'base' node property stiffness-normal 1e8 ...\n                           stiffness-shear 1e8 friction 20 cohesion 30000"},{"path":"axial-concrete-pile.html","id":"b.c.-and-i.c.","chapter":"2 Axial Concrete Pile","heading":"2.6 B.C. and I.C.","text":"","code":"; boundary and initial stress conditions\nzone face apply velocity-normal 0 range group 'Bottom'\nzone face apply velocity-normal 0 range group 'East' or 'West'\nzone face apply velocity-normal 0 range group 'North' or 'South'\nzone initialize-stress ratio 0.4286\nzone interface 'side' node initialize-stresses\nzone interface 'base' node initialize-stresses"},{"path":"axial-concrete-pile.html","id":"initial-equilibrium-1","chapter":"2 Axial Concrete Pile","heading":"2.7 Initial Equilibrium","text":"","code":"; Solve to initial equilibrium\nzone ratio local\nmodel solve ratio 1e-4\nmodel save 'initial'"},{"path":"axial-concrete-pile.html","id":"alterations-1","chapter":"2 Axial Concrete Pile","heading":"2.8 Alterations","text":"","code":""},{"path":"axial-concrete-pile.html","id":"install-the-pile","chapter":"2 Axial Concrete Pile","heading":"2.8.1 install the pile","text":"","code":"; install the pile\nmodel restore 'initial'\nzone cmodel assign elastic                          range group 'pile'\nzone property bulk 13.9e9 shear 10.4e9 density 2500 range group 'pile'\nmodel solve ratio 1e-4\nmodel save 'install'"},{"path":"axial-concrete-pile.html","id":"vertical-loading","chapter":"2 Axial Concrete Pile","heading":"2.8.2 vertical loading","text":"","code":"; vertical loading\nzone initialize state 0\nzone gridpoint initialize displacement (0,0,0)\nzone gridpoint initialize velocity     (0,0,0) \ntable 'ramp' add ([global.step],0) ([global.step+30000],-5e-8) ...\n      ([global.step+58000],-5e-8) ; Increase velocity applied to pile\n                                  ; over 30,000 steps\nzone face apply velocity-normal 1 table 'ramp' range group 'Top'\nhistory interval 250\nzone history name 'disp' displacement-z position (0,0,0)\ncall 'load'\nfish history name 'load' @vert_load\nzone mechanical damping combined\nmodel step 58000\nmodel save 'vertical-loading'"},{"path":"axial-concrete-pile.html","id":"vertical-then-lateral-loading","chapter":"2 Axial Concrete Pile","heading":"2.8.3 vertical then lateral loading","text":"","code":"; vertical loading then lateral loading\nmodel restore 'install'\nzone initialize state 0\nzone gridpoint initialize displacement (0,0,0)\nzone gridpoint initialize velocity     (0,0,0) \nzone face apply stress-zz [-1.0e5/(math.pi*0.3*0.3)] range group 'Top'\nmodel solve ratio 1e-4\nmodel save 'lateral-load-start'\n\n; apply lateral loading as x-velocity on cap\nzone initialize state 0\nzone gridpoint initialize displacement (0,0,0)\nzone gridpoint initialize velocity     (0,0,0) \nzone face apply velocity-x 1e-7 range group 'Top'\nzone history name 'disp' displacement-x position 0,0,0\ncall 'p-y' suppress ; Calculates p-y curve for pile, when tot_reac is called\n@make_pydata        ; Generate p-y curve calculation data \n@output_structure   ; Sanity check of p-y curve data \nfish history name 'load' @tot_reac\nmodel step 416500\nmodel save 'lateral-load'"},{"path":"pull-tests.html","id":"pull-tests","chapter":"3 Pull-Tests","heading":"3 Pull-Tests","text":"","code":""},{"path":"pull-tests.html","id":"problem-description-1","chapter":"3 Pull-Tests","heading":"3.1 Problem Description","text":"note: FISH function force used sum raction forces monitor nodal displacement generated pull-testnote: free length bolt extends block + larger diameter\nPerfectly plastic behavior grout = max cohesion exceeded +post-peak weakening shear bond strengthnote: bond strength softening grout defined keyword coupling-cohesion-table (see Rockbolt Behavior)\nrelation btw shear disp. cohesion weakening prescribed\nthru table cct. softening friction grout canbe defined using keyword coupling-friction-table.","code":""},{"path":"pull-tests.html","id":"zones-2","chapter":"3 Pull-Tests","heading":"3.2 Zones","text":"","code":"; ==================================================================\n;   Simulation of pull-test for grouted reinforcement\n;   using modified pile elements - Softening of cohesion\n; ==================================================================\nmodel new \nfish automatic-create off\nmodel title 'Pull-test using modified pile elements - cohesion softening'\n; Create a single rock block and set its material properties.\nzone create brick size 4 4 6 point 1 (0.4,0,0) point 2 (0,0.4,0) ...\n                             point 3 (0,0,0.6)"},{"path":"pull-tests.html","id":"properties-1","chapter":"3 Pull-Tests","heading":"3.3 Properties","text":"","code":"zone cmodel assign elastic\nzone property bulk 5e9 shear 3e9\nzone face apply velocity-normal 0.0 range position-z 0.6\n; Create a pile element and assign properties\nstruct pile create by-line (0.2,0.2,0.1) (0.2,0.2,0.7) segments 12\nstruct pile property rockbolt-flag on\nstruct pile property young 200e9 poisson 0.25 cross-sectional-area 5e-4 ...\n                     perimeter 0.08\nstruct pile property tensile-yield   2.25e5  ; ultimate tensile strength\nstruct pile property moi-y 2.0e-8 moi-z 2.0e-8 moi-polar 4.0e-8 ; 0.25*pi*r^4\nstruct pile property coupling-cohesion-shear 1.75e5 ...\n                     coupling-stiffness-shear 1.12e7\nstruct pile property coupling-cohesion-normal 1.75e5 ...\n                     coupling-stiffness-normal 1.12e7\nstruct pile property coupling-cohesion-table 'cct'\n; change in cohesion with relative shear displacement\ntable 'cct' add (0,1.75e5) (0.025,1.75e4)"},{"path":"pull-tests.html","id":"initial-equilibrium-2","chapter":"3 Pull-Tests","heading":"3.4 Initial Equilibrium","text":"","code":"struct node fix velocity-x range position-z 0.7\nstruct node initialize velocity-x 1e-6 local range position-z 0.7\ncall 'pileforce' suppress ; FISH function calculates reaction force on zones"},{"path":"pull-tests.html","id":"alterations-2","chapter":"3 Pull-Tests","heading":"3.5 Alterations","text":"","code":"; Set up histories for monitoring model behavior\nhistory interval 10\nfish history name 'force' @force\nstruct node history name 'disp' displacement-z position (0.2,0.2,0.7)\n; Achieve a total displacement of 4.0 cm\nmodel cycle 40000\n;\nmodel save 'pull-5'"},{"path":"pull-tests.html","id":"some-other-notes","chapter":"3 Pull-Tests","heading":"3.6 Some other notes","text":"2.3. pull test confinement “Pulltest06.f3dat”\n+modified pile logic.(see Behavior Shear Coupling Springs) linear law implemented.whereby reinforcement shear strength defined constant(coupling-cohesion-shear)+ effective pressureperimeterfric angle(coupling-friction-shear)\npressure dependence activated automatically issuing reinforcement properties(perimeter) and2.5. pull test tensile rupture “Pulltest08.f3dat”\nnote: tensile-yield, tensile-failure-strain: limiting axial yield force limiting axial strain rockbolt","code":""},{"path":"grid.html","id":"grid","chapter":"4 Grid","heading":"4 Grid","text":"","code":""},{"path":"grid.html","id":"primitive-shapes","chapter":"4 Grid","heading":"4.1 Primitive Shapes","text":"note: zone create generates primitive gridnote: zone gridpoint create puts gridpoints specific locations note: zone gridpoint merge ensures separate primitives connected properlynote: zone attach connects primitive meshes different zone sizes.ex) 5 along innder radius cylindrical tunnel,\n10 along axis\n6 along circumference tunnel\n12 periphery tunnel outer boundary modelnote: size keyword defines number zones grid.keywords zone create:\n- dimension\n- edge\n- fill\n- point (boundary dimensions)\n- ratio (coarser toward edge)\n- size","code":"zone create radial-cylinder size 5 10 6 12 fill\nzone create radial-cylinder size 5 10 6 12 ratio 1 1 1 5\neach size is controlled by a ratio (geometric ratio of 1.2 times preceding zone)"},{"path":"grid.html","id":"several-primitive-shapes-connected","chapter":"4 Grid","heading":"4.2 several primitive shapes connected:","text":"adds symmetric part.note: symmetry plane vertical plane (located dip, dip-direction, origin keywords) coincident x = 0 plane. Note dip angle (dip) dip direction (dip-direction) assume x corresponds “East,” y “North,” z “.”third option, zone gridpoint create command, available position single points model region.note: zone gridpoint create used positioning reference points primitives execution zone create command, check made boundary gridpoint boundary gridpoints zones already exist.\ntwo boundary gridpoints fall within tolerance 1 ? 10-7 (relative magnitude gridpoints position vector) , assumed point,\ndiscovered gridpoints don’t match, zone gridpoint merge command can used merge gridpoints zone create command applied.Example: (zone attach) - Two unequal sub-gridsExample: (zone densify)first two command lines can changed \nzone densify segments 2 refines upper zones (z-coordinate 2 4) segment number 2 edge.","code":"zone create radial-cylinder size 5 10 6 12 rat 1 1 1 1.2 ...\n                           point 0 (0,0,0) point 1 (100,0,0) ...\n                           point 2 (0,200,0) point 3 (0,0,100)\nzone create radial-tunnel size 5 10 5 12 rat 1 1 1 1.2 ...\n                          point 0 (0,0,0) point 1 (0,0,-100) ...\n                          point 2 (0,200,0) point 3 (100,0,0)\n; here, model boundary dimensions are 100, 200, 100\n; boundary coord are defined using point keyword\n\nzone reflect dip 90 dip-direction 270 origin (0,0,0) zone create brick size 4 4 2 point 0 (0,0,0) point 1 (4,0,0) ...\n                             point 2 (0,4,0) point 3 (0,0,2)\nzone create brick size 8 8 4 point 0 (0,0,2) point 1 (4,0,2) ...\n                             point 2 (0,4,2) point 3 (0,0,4)\nzone attach by-face range position-z 2zone create brick size 4 4 4\nzone densify segments 2 range position-x 2 4"},{"path":"grid.html","id":"structural-element-operation","chapter":"4 Grid","heading":"4.3 Structural Element Operation","text":"Creating liner service tunnelThe liner contains 240 structural shell elements connected FLAC3D grid 143 structural-node links. grid liner shown .","code":"; liner\nstructure shell create by-face range cylinder ...\n                                     end-1 (0,0,-1) end-2 (0,50,-1) ...\n                                     radius 3"},{"path":"grid.html","id":"densifying-grid-by-specifying-max-size-length","chapter":"4 Grid","heading":"4.4 Densifying grid by specifying max size length","text":"note local z-direction, maximum size length 0.4. FLAC3D densifies maximum length direction 1/3 (= 0.4)\nzone attach -face command example used attach faces sub-grids together rigidly form single gridAlways use zone attach -face command zone densify command different numbers gridpoints along faces different zones.","code":"model new\nzone create brick size 4 4 4\nplot 'Brick' export bitmap filename 'densify3.png'\n;\nzone densify local maximum-length (0.5,0.5,0.4) range position-z 2 4\nzone attach by-face\n;\nplot 'Brick' export bitmap filename 'densify4.png'"},{"path":"grid.html","id":"densify-a-grid-using-geometric-information","chapter":"4 Grid","heading":"4.4.1 Densify a grid using geometric information","text":"","code":"model new\nzone create brick size 10 10 10\n;\ngeometry set \"setA\" polygon create ...\n                    by-positions (0,0,1) ( 5,0, 1) ( 5,10, 1) (0,10,1)\ngeometry set \"setA\" polygon create ...\n                    by-positions (5,0,1) (10,0, 5) (10,10, 5) (5,10,1)\ngeometry set \"setB\" polygon create ...\n                    by-positions (0,0,5) ( 5,0, 5) ( 5,10, 5) (0,10,5)\ngeometry set \"setB\" polygon create ...\n                    by-positions (5,0,5) (10,0,10) (10,10,10) (5,10,5)\nplot 'Brick2' export bitmap filename 'densify5.png'\n\nzone densify segments 2 range geometry-space \"setA\" set \"setB\" count 1\nzone attach by-face\n;\nplot 'Brick2' export bitmap filename 'densify6.png'"},{"path":"syntax-and-grammar.html","id":"syntax-and-grammar","chapter":"5 Syntax and Grammar","heading":"5 Syntax and Grammar","text":"","code":""},{"path":"syntax-and-grammar.html","id":"introduction","chapter":"5 Syntax and Grammar","heading":"5.1 Introduction","text":"","code":"import itasca as it\nit.command(\"python-reset-state false\")\nit.command(\"\"\"\nmodel new\nzone create brick size 10 10 10\nzone cmodel assign elastic\nzone property density 2950 young 12e9 poisson 0.25\ncycle 1\n\"\"\")\nit.zone.count()\nz=it.zone.find(1)\nprint z\nz.pos()\nvolume_sum = 0.0\nfor z in it.zone.list():\n  volume_sum += z.vol()\n\nprint volume_sum\nprint z.vol() * it.zone.count()\nassert volume_sum == z.vol() * it.zone.count()\n\nz = it.zone.near ((5,5,5))\nz.pos()"},{"path":"syntax-and-grammar.html","id":"zones-3","chapter":"5 Syntax and Grammar","heading":"5.2 Zones","text":"","code":"it.zone.count() # 1000\nz = it.zone.find(1)\nfor z in it.zone.list():\n  z = it.zone.near((5,5,5))\nz.pos()\nz.vol()"},{"path":"syntax-and-grammar.html","id":"properties-2","chapter":"5 Syntax and Grammar","heading":"5.3 Properties","text":"","code":"z.props() or z.props()['bulk']\nz.prop('shear')\nz.set_prop('bulk', 8.5e9)"},{"path":"syntax-and-grammar.html","id":"gridpoints","chapter":"5 Syntax and Grammar","heading":"5.4 Gridpoints","text":"","code":"gp = it.gridpoint.near((2,2,2))\nfor gp in it.gridpoint.list():\n  total_mass = gp.mass_gravity()\nz.vol()*z.density()*1000"},{"path":"syntax-and-grammar.html","id":"structural-elements","chapter":"5 Syntax and Grammar","heading":"5.5 Structural Elements","text":"","code":"it.structure.list()\nit.structure.find(1)\nit.structure.near((0,2,2))\nit.structure.node.find(1)\ns_node.links()[0]"},{"path":"syntax-and-grammar.html","id":"extra-variables","chapter":"5 Syntax and Grammar","heading":"5.6 Extra Variables","text":"","code":"z.set_extra(1, 1.23)\nz.set_extra(2, \"a test string\")\nz.set_extra(1, gp.pos())"},{"path":"syntax-and-grammar.html","id":"groups-and-b.c.","chapter":"5 Syntax and Grammar","heading":"5.7 Groups and B.C.","text":"","code":"if z.group(\"default\") == \"lower\":\n  gp.set_fix(0, True)\n  gp.set_fix(1, True)\n  gp.set_force_load((1e6,2e6,1e6))\nit.zone.near((5,5,5)).stress()\nit.zone.near((5,5,5)).strain()\n\"\"\""},{"path":"syntax-and-grammar.html","id":"parameteric-studies","chapter":"5 Syntax and Grammar","heading":"5.8 Parameteric Studies","text":"","code":"\"*note: for modulus in [6e9, 8e9, 10e9, 12e9]:\"\nit.command(\"\"\"\nmodel restore 'before_cycling'\nzone prop young {}\nmodel solve\n\"\"\".format(modulus))\nvertical_disp = it.gridpoint.near((5,5,10)).disp_z()\nprint \"~~~\".format(modulus,vertical_disp)"},{"path":"syntax-and-grammar.html","id":"setting-fish-variables","chapter":"5 Syntax and Grammar","heading":"5.9 Setting FISH variables","text":"","code":"import itasca as it\nit.command('python-reset-state false')\nit.fish.set('x', 10)\nx = it.fish.get('x') yields 10"},{"path":"syntax-and-grammar.html","id":"issuing-command","chapter":"5 Syntax and Grammar","heading":"5.9.1 Issuing Command","text":"","code":"import itasca as it\nimport numpy as np\ndata = np.loadtext('brick-data.txt')\ncommand_template = ;;; \nzone create brick\nzone cmodel assign elastic\nzone property density {density} young {young} poisson {poisson}\n;;;\ndensity = data[0]\nyoung = data[1]\npoisson = data[2]\n\ncommand = command_template.format(density=density, young=young, poisson=poisson)\nit.command(command)"},{"path":"syntax-and-grammar.html","id":"string","chapter":"5 Syntax and Grammar","heading":"5.10 String","text":"","code":"\"The value of x is {:.2f}\".format(0.3872)\n\"The value of x is {:.2e}\".format(0.3872)\n\"My name is Sasha\"\n\"My name is {}\".format(\"Sasha\")\n\"My name is {name}\".format(name=\"Sasha\")"},{"path":"syntax-and-grammar.html","id":"fish-syntax","chapter":"5 Syntax and Grammar","heading":"5.11 Fish Syntax","text":"","code":""},{"path":"syntax-and-grammar.html","id":"use-of","chapter":"5 Syntax and Grammar","heading":"5.11.1 Use of …","text":"complete FISH statement occupies one line. However, line may typed across two lines long line ultimate terminated continuation character ( … ). Use temporary variables hinge points concatenate lengthy formulas can also handy. following example shows can done:","code":"fish define long_sum  ;example of a sum of many things\n    local temp = v1 + v2 + v3 + v4 + v5 + v6 + v7 + v8 + v9 + v10\n    long_sum = temp + v11 + v12 + v13 + v14 + v15\nend"},{"path":"syntax-and-grammar.html","id":"variable-types","chapter":"5 Syntax and Grammar","heading":"5.11.2 Variable Types","text":"resulting screen display looks like :","code":"model new\nfish define types\n    v1 = 2\n    v2 = 3.4\n    v3 = 'Have a nice day'\n    v4 = v1 * v2\n    v5 = v3 + ', old chap'\n    v6 = vector(1,2,3)\n    v7 = matrix(vector(1,1,1))\n    v8 = true\nend\n@types\nfish list           Name    Value\n           ------- --------------------\n(function) types 0 (integer)\n           v1    2 (integer)\n           v2    3.400000000000000e+00 (real)\n           v3    'Have a nice day' (string)\n           v4    6.800000000000000e+00 (real)\n           v5    'Have a nice day, old chap' (string)\n           v6    (1.000000000000000e+00,2.000000000000000e+00,\n                  3.000000000000000e+00) (vector3)                [**]\n           v7    3 x 1 (matrix)\n           v8    true (boolean)"},{"path":"syntax-and-grammar.html","id":"traditional-for-loop-in-fish","chapter":"5 Syntax and Grammar","heading":"5.11.3 Traditional for loop in FISH","text":"standard loop also available FISH provide additionalloop control.","code":"fish define xxx\n    sum  = 0\n    prod = 1\n    loop for (n = 1, n <= 10, n = n + 1)\n        sum  = sum  + n\n        prod = prod * n\n    end_loop\n    io.out('The sum is ' + string(sum) + ... \n           ' and the product is ' + string(prod))\nend\n@xxx"},{"path":"syntax-and-grammar.html","id":"controlled-loop","chapter":"5 Syntax and Grammar","heading":"5.11.3.1 Controlled loop","text":"case, loop variable n given successive values 1 10, statements inside loop (loop endloop statements) executed value. mentioned, variable names arithmetic expression substituted numbers 1 10. Note exit statement can used break FISH loop continue statement can used skip remaining instructions loop, moving next sequence loop.important note formulation looping different loop high-level programming languages. instance, one easily control ending condition (.e., loop 1 10 excluding 10) incrementing mechanism (.e., loop 1 10 twos loop backward). standard loop also available FISH provide additional loop control.","code":"model new\nfish define xxx\n    sum  = 0\n    prod = 1\n    loop n (1,10)\n        sum  = sum  + n\n        prod = prod * n\n    end_loop\n    io.out('The sum is ' + string(sum) +  ...\n           ' and the product is ' + string(prod))\nend\n@xxx"},{"path":"syntax-and-grammar.html","id":"if-else-endif-construct","chapter":"5 Syntax and Grammar","heading":"5.11.4 if else endif construct","text":"statements allow conditional execution FISH function segments; else optional. item test consists one following symbols symbol pairs:= # > < >= <=displayed value abc example depends argument provided abc executed. experiment different test symbols (e.g., replace > <).now, FISH functions invoked FLAC3D, either using sqaure brackets [] inline FISH, giving function name prepended @ character, using fish list command. also possible reverse, give FLAC3D commands within FISH functions. valid FLAC3D commands can embedded following FISH statements:","code":"model new\nfish define abc(xx)\n    if xx > 0 then \n        abc = 33\n    else\n        abc = 11\n    end_if\nend\n[abc(1)]\n[abc(-1)]"},{"path":"syntax-and-grammar.html","id":"arrays-and-maps","chapter":"5 Syntax and Grammar","heading":"5.11.5 Arrays and Maps","text":"often case one like store list objects loop future. may computed values zones, instance, specific gridpoint pointers . FISH two containers use circumstances, termed arrays maps.array holds list FISH variables type can looped accessed integer index element array. Arrays can multidimensional resize dynamically. simple example shows one can create array integers sum values.","code":""},{"path":"syntax-and-grammar.html","id":"array-example","chapter":"5 Syntax and Grammar","heading":"5.11.5.1 Array example","text":"example, array created filled numbers. loop construct used loop array entries sum product computed output.map, hand, associative container, meaning one can access members map integer string used insert value map. Maps can dynamically resized added one another (appending maps together), preferred constructs storing lists FISH variables later access.","code":"model new\nfish define array_operation\n    ;create and populate an array with products of 2\n    arr = array.create(10)\n    loop local n(1,10)\n        arr[n] = 2*n\n    end_loop\n      \n    ;compute the sum and product of elements in the array\n    sum = 0\n    prod = 1\n    local i = 1\n    loop while (i <= array.size(arr,1))\n        sum = sum + arr[i]\n        prod = prod * arr[i]\n        i = i + 1\n    end_loop\n    io.out('The sum is ' + string(sum) + ...\n           ' and the product is ' + string(prod))\nend\n@array_operation"},{"path":"syntax-and-grammar.html","id":"map-example","chapter":"5 Syntax and Grammar","heading":"5.11.5.2 Map example","text":"Unlike arrays, maps can looped using loop foreach construct. case, n value held map entry, integer name object map. Likewise, instead using integers insert objects map, one use strings first, second, etc. allows one easily efficiently store access FISH variables user-defined name.","code":"model new\nfish define map_operation\n    ;create and populate a map with products of 2\n    my_map = map(1,2)\n    loop local n(2,10)\n        map.add(my_map,n,2*n)\n    end_loop\n      \n    ;compute the sum and product of elements in the map\n    sum = 0\n    prod = 1\n    loop foreach n my_map\n        sum = sum + n\n        prod = prod * n\n    end_loop\n    io.out('The sum is ' + string(sum) + ...\n           ' and the product is ' + string(prod))\nend\n@map_operation"},{"path":"syntax-and-grammar.html","id":"fish-function","chapter":"5 Syntax and Grammar","heading":"5.11.6 Fish Function","text":"FISH functions calculate bulk shear moduli","code":"model new\nfish define derive(y_mod,p_ratio)\n    s_mod = y_mod / (2.0 * (1.0 + p_ratio))\n    b_mod = y_mod / (3.0 * (1.0 - 2.0 * p_ratio))\nend\n[derive(5e8,0.25)]\n[b_mod] \n[s_mod]"},{"path":"code-block.html","id":"code-block","chapter":"6 Code Block","heading":"6 Code Block","text":"","code":""},{"path":"code-block.html","id":"some-code","chapter":"6 Code Block","heading":"6.1 Some Code","text":"","code":"import itasca as it\nimport numpy as np\nnp.set_printoptions(threshold=20)\nit.command(\"python-reset-state false\")\nfrom itasca import zonearray as za\nfrom itasca import gridpointarray as gpa\n\n\" GROUPS AND MASK ARRAYS \"\nit.command(\"zone group \\\"lower\\\" range position-z 0 5\")\nza.in_group(\"lower\")\nza.in_group(\"lower\").sum(), \"zones in lower group.\"\ncorner_mask = reduce(np.logical_and, (x<3, y<3, z<3))\nza.set_group(corner_mask, \"corner\", \"geometry\")\nprint za.in_group(\"corner\", \"geometry\").sum(), \"zones in corner group.\"\n\n\" GRIDPOINTS ARRAY FUNCTIONS \"\ngpos = gpa.pos()\ngx, gy, gz = gpos.T\nprint gz\nf = gpa.fixity()\nprint f\nf[:,][gz==0] = True, True, True\nprint f\ngpa.set_fixity(f)\n\ntop_gridpoints = gz==10\nradial_distance = np.sqrt((gx-5)**2+(gy-5)**2)\ncentral_gridpoints = radial_distance < 5\nmask = np.logical_and(top_gridpoints, central_gridpoints)\nprint \"boundary load applied to {} gridpoints\".format(mask.sum())\nfapp = gpa.force_app()\nprint fapp\nfapp[:,2] = mask*1e6*(5.0-radial_distance)/5.0\ngpa.set_force_app(fapp)\n\nprint \"zone centroids: \"\nprint za.pos()\nza.gridpoints()\nza.faces()\nza.ids()\nprint za.neighbors()\n\n\n\n\" =========================================== \"\n\" =================RESULTS=================== \"\n\" =========================================== \"\n\nit.command(\"model solve\")\nprint \"gridpoint displacements:\"\nprint gpa.disp()\nprint \"gridpoint displacement magnitudes: \"\nmag = np.linalg.norm(gpa.disp(), axis=1)\nprint mag\nmax_index = np.argmax(mag)\nprint \"Maximum displacement: {} at location {}\".format(gpa.disp()[max_index],\n                                              gpa.pos()[max_index])\n\nprint \"Vertical displacement along the vertical line x=5, y=5: from z=0 to z=10\"\nprint gpa.disp()[np.logical_and(gx==5, gy==5)][:,2]\n\nza.stress()\n\nza.stress_flat()\n\n\n\" =========================================== \"\n\" =========REFERENCE EXAMPLES================ \"\n\" =========================================== \"\n\n\n\"\"\" Some Numpy Operation Examples\nnp.array([1,2,3,4,5])\nnp.linspace(0,1,15)\nnp.zeros((4,4))\na = np.linspace(0,1,15)\nb = np.ones_like(a)\nnp.sin(a)\nprint a[0]\na[0] = 20.2\nprint a\nc = np.array(((1,2,3),(4,5,6),(7,8,9),(10,11,12)))\nprint c\nc[0][0]\nc[:,0]\n\"\"\"\n\"\"\" SOME GRIDPOINTS EXAMPLES\nz = it.zone.near((5,5,5))\nprint \"central zone id: {}, position: {}\".format(z.id(), z.pos())\n\nfor gp in z.gridpoints():\n    print \"gridpoint with id: {} at {}\".format(gp.id(), gp.pos())\n\"\"\""},{"path":"code-block.html","id":"kiast-model","chapter":"6 Code Block","heading":"6.2 KIAST Model","text":"","code":"import itasca as it\nimport numpy as np\nnp.set_printoptions(threshold=20)\nit.command(\"python-reset-state false\")\nfrom itasca import zonearray as za\nfrom itasca import gridpointarray as gpa\n\ncommand_template_zone = \"\"\"\nmodel new\nzone create radial-cylinder point 0 (0,0,0) ...\n                            point 1 (40,0,0) ...\n                            point 2 (0,10,0) ...\n                            point 3 (0,0,40) ...\n                            point 4 (40,10,0) ...\n                            point 5 (0,10,40) ...\n                            point 6 (40,0,40) ...\n                            point 7 (40,10,40) ...\n                            point 8 (1,0,0) ...\n                            point 9 (0,0,1) ...\n                            point 10 (1,10,0) ...\n                            point 11 (0,10,1) ...\n                            size {radial} {axial} {perimeter} {outer} ...\n                            rat 1 1 1 1.5 ...\n                            fill group \"shaft\"\n\"\"\"\n\n_radial = 10\n_axial = 20\n_perimeter = 26 \n_outer = 40\n\ncommand = command_template_zone.format(radial=_radial, axial = _axial, perimeter = _perimeter, outer = _outer)\nit.command(command)\n\n\nit.command(\"\"\"\nzone group \"plate\" range position-x 0 3.2 position-y 8.5 10 position-z 0 3.2\n\"\"\")\n\nit.command(\"\"\"\nzone cmodel assign strain-softening range group \"Radial Cylinder1\"\nzone property density 2500 bulk 2e8 shear 1e8 range group \"Radial Cylinder1\"\nzone property cohesion 2e6 friction 45 tension 2e5 dilation 10 range group \"Radial Cylinder1\"\nzone property table-friction 'fri' table-cohesion 'coh' table-dilation 'dil' range group \"Radial Cylinder1\"\ntable 'fri' add (0, 45) (.05, 42) (.1, 40) (1, 40)\ntable 'coh' add (0,2e6) (.05,1e6) (.1,5e5) (1,5e5) \ntable 'dil' add (0, 10) (.05,  3) (.1,  0) \n;Constitutive modeland properties for shaft and plate\nzone cmodel assign elastic range group 'shaft'\nzone property bulk {name}  shear 10.4e9  range group 'shaft'\nzone cmodel assign elastic range group 'plate'\nzone property bulk {name}  shear 10.4e9  range group 'plate'\n\"\"\".format(name=13.9e9))\n\n\np = za.pos()\ntype(p)\np.shape\nit.zone.count()\nx,y,z = p.T\nupper_zones = z > 1.5\nprint((upper_zones).sum())\n\nmodulus = np.zeros_like(x) #create array same shape as x\nmodulus[upper_zones] = 1.2e10#specify all upper zones have modulus 1.2e10\nlower_zones = np.logical_not(upper_zones)\nmodulus[lower_zones] = 1.6e10\nza.set_prop_scalar(\"young\", modulus)\n\nit.command(\"zone group \\\"lower\\\" range position-z 0 5\")\nza.in_group(\"lower\")\nza.in_group(\"lower\").sum() #how many zones within specific group\n\n#refine this by getting corners\n#create a new mask\ncorner_mask = reduce(np.logical_and, (x<3, y<3, z<3)) #reduce is simply applying logical and x<3, y<3, z<3\nza.set_group(corner_mask, \"corner\", \"geometry\") # set the zones with corner_mask = true have \"corner\" and \"geometry\"\nprint(za.in_group(\"corner\", \"geometry\").sum(), \"zones in corner group.\") #output how many zones are in the corner group"},{"path":"template.html","id":"template","chapter":"A 1. Template","heading":"A 1. Template","text":"","code":""},{"path":"template.html","id":"problem-description-2","chapter":"A 1. Template","heading":"A.1 Problem Description","text":"","code":""},{"path":"template.html","id":"modeling-procedure-1","chapter":"A 1. Template","heading":"A.2 Modeling Procedure","text":"","code":""},{"path":"template.html","id":"zonesgroups","chapter":"A 1. Template","heading":"A.3 Zones/Groups","text":"","code":""},{"path":"template.html","id":"properties-3","chapter":"A 1. Template","heading":"A.4 Properties","text":"","code":""},{"path":"template.html","id":"b.c.-and-i.c.-1","chapter":"A 1. Template","heading":"A.5 B.C. and I.C.","text":"","code":""},{"path":"template.html","id":"initial-equilibrium-3","chapter":"A 1. Template","heading":"A.6 Initial Equilibrium","text":"","code":""},{"path":"template.html","id":"alterations-3","chapter":"A 1. Template","heading":"A.7 Alterations","text":"","code":""},{"path":"template.html","id":"results-1","chapter":"A 1. Template","heading":"A.8 Results","text":"","code":""},{"path":"reference-collective.html","id":"reference-collective","chapter":"B Reference Collective","heading":"B Reference Collective","text":"","code":""},{"path":"reference-collective.html","id":"uplift-resistance-of-anchor-plate","chapter":"B Reference Collective","heading":"B.0.1 Uplift Resistance of Anchor Plate","text":"","code":""},{"path":"reference-collective.html","id":"before-1968","chapter":"B Reference Collective","heading":"B.0.1.1 Before 1968","text":"CoulombMohrKotter’s equationBalla (1961)MorsMatsuo","code":""},{"path":"reference-collective.html","id":"post-1968","chapter":"B Reference Collective","heading":"B.0.1.2 Post-1968","text":"Meyerhof, G.G., Adams, J.. 1968Meyerhof, G.G. 1973Das, B.M., Seeley, G.R. 1975Rowe, R.K., Davis, H. 1982Dickin, E.., Leung, C.F. 1983Murray, E.J., Geddes, J.D. 1987Dickin, E.. 1988Koutsabeloulis, N.C., Griffiths, D.V. 1989\n#### Post-2000Merifield, R.S., Sloan, S.W. 2006","code":""},{"path":"reference-collective.html","id":"numerical-analysis","chapter":"B Reference Collective","heading":"B.0.2 Numerical Analysis","text":"","code":""},{"path":"reference-collective.html","id":"standards","chapter":"B Reference Collective","heading":"B.0.3 Standards","text":"IEEE 2001DS 1110, DS 1111","code":""},{"path":"reference-collective.html","id":"textbook","chapter":"B Reference Collective","heading":"B.0.4 Textbook","text":"Das, B. M. 2013. Earth Anchors","code":""},{"path":"reference-collective.html","id":"ph.d-thesis","chapter":"B Reference Collective","heading":"B.0.5 Ph.D Thesis","text":"","code":""},{"path":"reference-collective.html","id":"award-lecture","chapter":"B Reference Collective","heading":"B.0.6 Award Lecture","text":"","code":""}]
